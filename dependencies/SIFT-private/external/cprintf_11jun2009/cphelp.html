
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <!--
This HTML is auto-generated from an M-file.
To make changes, update the M-file and republish this document.
      -->
      <title>cpdoc</title>
      <meta name="generator" content="MATLAB 7.8">
      <meta name="date" content="2009-06-11">
      <meta name="m-file" content="cpdoc"><style type="text/css">

body {
  background-color: white;
  margin:10px;
}

h1 {
  color: #990000; 
  font-size: x-large;
}

h2 {
  color: #990000;
  font-size: medium;
}

/* Make the text shrink to fit narrow windows, but not stretch too far in 
wide windows. */ 
p,h1,h2,div.content div {
  max-width: 600px;
  /* Hack for IE6 */
  width: auto !important; width: 600px;
}

pre.codeinput {
  background: #EEEEEE;
  padding: 10px;
}
@media print {
  pre.codeinput {word-wrap:break-word; width:100%;}
} 

span.keyword {color: #0000FF}
span.comment {color: #228B22}
span.string {color: #A020F0}
span.untermstring {color: #B20000}
span.syscmd {color: #B28C00}

pre.codeoutput {
  color: #666666;
  padding: 10px;
}

pre.error {
  color: red;
}

p.footer {
  text-align: right;
  font-size: xx-small;
  font-weight: lighter;
  font-style: italic;
  color: gray;
}

  </style></head>
   <body>
      <div class="content">
         <h2>Contents</h2>
         <div>
            <ul>
               <li><a href="#1">introduction</a></li>
               <li><a href="#2">--- syntax</a></li>
               <li><a href="#3">--- input</a></li>
               <li><a href="#4">--- output</a></li>
               <li><a href="#5">--- summary of options</a></li>
               <li><a href="#6">arrays and tables</a></li>
               <li><a href="#7">--- definitions</a></li>
               <li><a href="#8">--- formatting</a></li>
               <li><a href="#9">--- arrays</a></li>
               <li><a href="#12">--- creating tables using row/column options</a></li>
               <li><a href="#22">--- creating tables using the default format</a></li>
               <li><a href="#24">--- printing arrays that contain a predefined table</a></li>
               <li><a href="#27">--- leading and trailing text</a></li>
               <li><a href="#29">CELL conversion options</a></li>
               <li><a href="#30">--- 2D character arrays and ND cell arrays of ND character strings</a></li>
               <li><a href="#40">--- full mixed real and/or complex numeric arrays</a></li>
               <li><a href="#44">--- sparse mixed real and/or complex numeric arrays</a></li>
               <li><a href="#48">--- logical arrays</a></li>
               <li><a href="#50">--- NaN/Inf</a></li>
               <li><a href="#52">--- hexadecimal representation of numeric input</a></li>
               <li><a href="#53">cell arrays</a></li>
               <li><a href="#54">--- empty CELLs and other data types</a></li>
               <li><a href="#58">--- surrounding text of CELLs</a></li>
               <li><a href="#60">ND arrays</a></li>
               <li><a href="#62">ND cell arrays of mixed content</a></li>
               <li><a href="#64">--- page indexing</a></li>
               <li><a href="#66">ND structures</a></li>
               <li><a href="#70">--- anomalous structures</a></li>
               <li><a href="#71">ND arrays and ND cell arrays of other objects</a></li>
               <li><a href="#76">output files</a></li>
               <li><a href="#77">--- creating output files</a></li>
               <li><a href="#78">--- appending to files</a></li>
               <li><a href="#79">--- using a template file</a></li>
               <li><a href="#81">--- replacing tokens in template files</a></li>
               <li><a href="#82">option processing</a></li>
               <li><a href="#83">--- option precedence</a></li>
               <li><a href="#84">--- option preferences across MATLAB sessions</a></li>
               <li><a href="#87">--- reading and writing option files</a></li>
               <li><a href="#93">--- option structures</a></li>
               <li><a href="#95">engine options</a></li>
               <li><a href="#96">--- TAB size and TAB replacement in CELLs</a></li>
               <li><a href="#99">--- runtime printout</a></li>
               <li><a href="#100">output</a></li>
               <li><a href="#101">--- macros</a></li>
               <li><a href="#108">--- arguments</a></li>
               <li><a href="#113">--- input to xlswrite</a></li>
            </ul>
         </div>
         <h2>introduction<a name="1"></a></h2><pre class="codeinput"><span class="comment">% CPRINTF	us 11-Jun-2009 08:58:55 / us@neurol.unizh.ch</span>
<span class="comment">%</span>
<span class="comment">%		- converts an ND array of any MATLAB data type</span>
<span class="comment">%		  to a 2D character array</span>
<span class="comment">%		- the input may be a cell array formatted as a table with</span>
<span class="comment">%		  row/column labels and row/column separators</span>
<span class="comment">%		- any input can be formatted as a table using</span>
<span class="comment">%		  any combination of</span>
<span class="comment">%		  row/column labels and row/column separators</span>
<span class="comment">%</span>
<span class="comment">%		  use ML's web browser with html proportional text</span>
<span class="comment">%		  set to a fixed font to see the HTML file with</span>
<span class="comment">%		  proper formatting</span>
</pre><h2>--- syntax<a name="2"></a></h2><pre class="codeinput"><span class="comment">%		[T,TC,AC,P] = CPRINTF(A,OPT1,...,OPTn)</span>
<span class="comment">%				converts A</span>
<span class="comment">%		 P          = CPRINTF</span>
<span class="comment">%				returns  the engine parameters</span>
<span class="comment">%		              CPRINTF</span>
<span class="comment">%				displays the help</span>
</pre><h2>--- input<a name="3"></a></h2><pre class="codeinput"><span class="comment">% A	:	an ND array of</span>
<span class="comment">%  		- real and/or complex full   numeric data</span>
<span class="comment">%  		- real and/or complex sparse numeric data</span>
<span class="comment">%  		- logical data</span>
<span class="comment">%  		- char strings</span>
<span class="comment">%		- structures</span>
<span class="comment">%  		- other objects</span>
<span class="comment">%  		an ND cell array of any combination of the above</span>
</pre><h2>--- output<a name="4"></a></h2><pre class="codeinput"><span class="comment">% T	:	character array with same number of rows and</span>
<span class="comment">%		delimiter separated columns as A</span>
<span class="comment">% TC	:	cell array of T</span>
<span class="comment">% AC	:	cell array of A (useful if A is displayed as a table)</span>
<span class="comment">% P	:	structure with engine parameters</span>
<span class="comment">%</span>
<span class="comment">% NOTE	:	unless an output argument is present, CPRINTF</span>
<span class="comment">%		DOES print the result even if an [;] is added</span>
<span class="comment">%		at the end to suppress printing</span>
</pre><h2>--- summary of options<a name="5"></a></h2><pre class="codeinput"><span class="comment">% OPTION	argument	description		default</span>
<span class="comment">% ----------------------------------------------------------------</span>
<span class="comment">%		SC		a single CHAR</span>
<span class="comment">%		CS		a CHAR string</span>
<span class="comment">%		FS		a format spec</span>
<span class="comment">% ----------------------------------------------------------------</span>
<span class="comment">% CELL				data type</span>
<span class="comment">% ----------------------------------------------------------------</span>
<span class="comment">%    -c	:	FS		character string	'%s'</span>
<span class="comment">%    -n	:	FS		numeric real		'%g'</span>
<span class="comment">%   -cr	:	FS		numeric complex real	'%g'</span>
<span class="comment">%   -ci	:	FS		numeric complex imag	'%+gi'</span>
<span class="comment">%   -cd	:	FS		numeric complex delim	' '</span>
<span class="comment">%    -s	:	FS		numeric sparse indices	'(%g %g)'</span>
<span class="comment">%    -f	:	FS		false			'F'</span>
<span class="comment">%    -t	:	FS		true			'T'</span>
<span class="comment">%    -E	:	FS		empty CELL		'E(class)'</span>
<span class="comment">%    -I	:	FS		&plusmn;Inf			'&plusmn;INF'</span>
<span class="comment">%    -N	:	FS		NaN			'NAN'</span>
<span class="comment">%   -hs	:	T|F		convert to single hex	[F]</span>
<span class="comment">%   -hd	:	T|F		convert to double hex	[F]</span>
<span class="comment">%  -nex	:	T|F		no char CELL expansion	[F]</span>
<span class="comment">%    -O	:	FS		other objects		[built-in]</span>
<span class="comment">%   -Or	:	T|F		other objects raw mode	[built-in]</span>
<span class="comment">%    -C	:	FS		text surrounding CELLs	'%s'</span>
<span class="comment">%   -la	:	T|F		cell content alignment	[F]</span>
<span class="comment">%  -cla	:	T|F		complex alignment	[F]</span>
<span class="comment">%				F = right align</span>
<span class="comment">%				T = left  align</span>
<span class="comment">%</span>
<span class="comment">% ROW				content</span>
<span class="comment">% ----------------------------------------------------------------</span>
<span class="comment">%    -L	:	CS		leading   row text	''</span>
<span class="comment">%    -T	:	CS		trailing  row text	''</span>
<span class="comment">%    -d	:	SC		separator between CELLs	' '</span>
<span class="comment">%   -dt	:	SC		separator table columns	' '</span>
<span class="comment">%   -nd	:	T|F		show ND page indices	[F]</span>
<span class="comment">%</span>
<span class="comment">% TABLE				content / processing</span>
<span class="comment">% ----------------------------------------------------------------</span>
<span class="comment">%   -Ct	:	FS		text surrounding body	'%s'</span>
<span class="comment">%				but not label CELLs</span>
<span class="comment">%   -nc	:	FS		numeric real col	'%g'</span>
<span class="comment">%   -nr	:	FS		numeric real row</span>
<span class="comment">%   -Lh	:	{tn}		table  name		{' '}</span>
<span class="comment">%   -Lc	:	{c1...cn}	column labels</span>
<span class="comment">%   -Lr	:	{r1...rn}	row    labels</span>
<span class="comment">%  -Lcs	:	SC		column separator	''</span>
<span class="comment">%  -Lrs	:	SC		row    separator	''</span>
<span class="comment">%   -it	:	T|F		input is a       table	[F]</span>
<span class="comment">%   -mt	:	T|F		convert input to table	[F]</span>
<span class="comment">%   -ic	:	T|F		column width		[F]</span>
<span class="comment">%				F = max of all  cols</span>
<span class="comment">%				T = max of each col</span>
<span class="comment">%</span>
<span class="comment">% OUTPUT FILES</span>
<span class="comment">% ----------------------------------------------------------------</span>
<span class="comment">%   -fa	:	name		append to output file	[]</span>
<span class="comment">%   -fc	:	name		create    output file	[]</span>
<span class="comment">%   -fi	:	name		input  file		[]</span>
<span class="comment">%   -fm	:	marker		insert result at marker	[]</span>
<span class="comment">%				in file [-fin]</span>
<span class="comment">%   -fr	:	{t1,r1,...}	replace token tx with	[]</span>
<span class="comment">%				value rx</span>
<span class="comment">%</span>
<span class="comment">% PROCESSING</span>
<span class="comment">% ----------------------------------------------------------------</span>
<span class="comment">%    -p	:	T|F		do NOT use preferences	[F]</span>
<span class="comment">%  -opt	:	struct		use struct.option	[]</span>
<span class="comment">%  -ini	:	name		read options from file	[]</span>
<span class="comment">%  -sav	:	name		save options to   file	[]</span>
<span class="comment">%  -tab	:	n		use n SPACES/TAB	[8]</span>
<span class="comment">% -ntab	:	T|F		keep TABs in CELLs	[F]</span>
<span class="comment">%    -q	:	n		do not display result	[F]</span>
<span class="comment">%   -so	:	T|F		collect all output in	[F]</span>
<span class="comment">%				a structure</span>
<span class="comment">%   -db	:	T|F		show processing stages	[F]</span>
</pre><h2>arrays and tables<a name="6"></a></h2>
         <h2>--- definitions<a name="7"></a></h2><pre class="codeinput"><span class="comment">% each element of an array of any data type including a cell array</span>
<span class="comment">%    is considered a CELL</span>
<span class="comment">% CELLs can be formatted in various ways according to the data type</span>
<span class="comment">% a separator is printed between two CELLs</span>
<span class="comment">%</span>
<span class="comment">% CPRINTF optionally prints the input as a table consisting of</span>
<span class="comment">%    default or user definable</span>
<span class="comment">%    - table name</span>
<span class="comment">%    - row and/or column labels</span>
<span class="comment">%    - row and/or column separators</span>
<span class="comment">%    in any combination</span>
<span class="comment">% any input of min size 3x3 may be	printed   as a table	[-it]</span>
<span class="comment">% any input of any size may be		converted to a table	[-mt]</span>
<span class="comment">%</span>
<span class="comment">% CPRINTF optionally prints LEADING and/or TRAILING text</span>
<span class="comment">%    before and after each row of an array or a table</span>
</pre><h2>--- formatting<a name="8"></a></h2><pre class="codeinput"><span class="comment">% sequence of formatting</span>
<span class="comment">%</span>
<span class="comment">% 1: CELL			each CELL's content is displayed according to</span>
<span class="comment">%				   the various CELL formatting options</span>
<span class="comment">%				by default, CELLs of Mx1 or ND character strings</span>
<span class="comment">%				   are expanded unless the [-nex] option is used</span>
<span class="comment">%				by default, all column widths of the array are</span>
<span class="comment">%				   the maximun width of all columns after conversion</span>
<span class="comment">%				   unless the [-ic] option is used, in which case</span>
<span class="comment">%				   each column's max width is used</span>
<span class="comment">%				a CELL's text may be left aligned [-la] with</span>
<span class="comment">%				   respect to the column width</span>
<span class="comment">% 2: CELL surroundings		each CELL's output may be embedded in additional</span>
<span class="comment">%				   text options [-C]/[-Ct]</span>
<span class="comment">% 3: CELL separators		a separator is inserted between two CELLs according</span>
<span class="comment">%				   to the [-d] option</span>
<span class="comment">% 4: ROW/COL labels		each label's numeric content is displayed according</span>
<span class="comment">%				   to table [-nc]/[-nr] options</span>
<span class="comment">% 5: ROW/COL separators		separators are displayed according to</span>
<span class="comment">%				   various options and depend</span>
<span class="comment">%				   on the content of the separator as well as</span>
<span class="comment">%				   the content of the individual column separator</span>
<span class="comment">%				   of a predefined table [-it]</span>
<span class="comment">% 6: table name			is added at position (1,1) and formatted according</span>
<span class="comment">%				   to the common [-n] option</span>
<span class="comment">% 7: L/T text			row text delimiters are added</span>
<span class="comment">%				   before (L) and/or after (T) the array or table</span>
<span class="comment">%</span>
<span class="comment">% options to create a format string</span>
<span class="comment">%</span>
<span class="comment">% 1:				an ANSI C format string, eg,</span>
<span class="comment">%				      'a number %g'</span>
<span class="comment">% 2:				an anonymous function returning a string, eg,</span>
<span class="comment">%				      @(x) sprintf('a number %10d',x)</span>
<span class="comment">% 3:				a handle to a user defined function</span>
<span class="comment">%				   returning a string, eg,</span>
<span class="comment">%				      @mynumber</span>
<span class="comment">%				   where mynumber.m is a function file</span>
<span class="comment">% 4:				a handle to a ML stock function</span>
<span class="comment">%				   returning a string, eg,</span>
<span class="comment">%				      @dec2bin</span>
</pre><h2>--- arrays<a name="9"></a></h2><pre class="codeinput"><span class="comment">% NOTE:	all data is collected in structure S to not clutter the workspace</span>
</pre><pre class="codeinput"><span class="comment">% simple real numeric matrix</span>

	clear <span class="string">s</span>;
	s.r=reshape(1:4*6,[4,6]);

	disp(s.r);
</pre><pre class="codeoutput">     1     5     9    13    17    21
     2     6    10    14    18    22
     3     7    11    15    19    23
     4     8    12    16    20    24

</pre><pre class="codeinput"><span class="comment">% CPRINTF default output</span>
<span class="comment">% - all CELL widths have the same max CELL width</span>
<span class="comment">% - a CELL separator [-d] is inserted between CELLs 2:end-1 including</span>
<span class="comment">%      row labels and separators if the output is a table</span>

<span class="comment">% NOTE:	the [-tab] option (see section -engine options-) has NO effect</span>
<span class="comment">%	on the column separator [-d] if it contains TABs</span>

	cprintf(s.r);
</pre><pre class="codeoutput"> 1  5  9 13 17 21
 2  6 10 14 18 22
 3  7 11 15 19 23
 4  8 12 16 20 24
</pre><h2>--- creating tables using row/column options<a name="12"></a></h2><pre class="codeinput"><span class="comment">% label and separator options</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -Lh		name of the table at position (1,1)	{name}</span>
<span class="comment">%		- numeric data is converted</span>
<span class="comment">%		  according to the [-n] option</span>
<span class="comment">%		- names are always left aligned</span>
<span class="comment">% -Lc		col labels				{cl1,...,cln}</span>
<span class="comment">% -Lr		row labels				{rl1,...,rln}</span>
<span class="comment">%		- label(s) will be repeated or cut</span>
<span class="comment">%		  automatically to fit the table size</span>
<span class="comment">% -nc		format of numeric col labels		FS		['%g']</span>
<span class="comment">% -nr		format of numeric row labels		FS		['%g']</span>
<span class="comment">% -Lcs		col  separator				'csep'</span>
<span class="comment">% -Lrs		row  separator				'rsep'</span>
<span class="comment">% -d		CELL separator				'csep'</span>
<span class="comment">%		- also apply to labels and</span>
<span class="comment">%		  row/col separators</span>
<span class="comment">%		- a '\t' is printed as TAB</span>
<span class="comment">% -dt		CELL separator				'csep'</span>
<span class="comment">%		- only apply to col labels</span>
<span class="comment">%		  and separators in a table</span>
<span class="comment">%		- a '\t' is printed as TAB</span>

<span class="comment">% tables are constructed according to these input options</span>

	s.clab={<span class="string">'apple'</span>,<span class="string">'orange'</span>,<span class="string">'banana'</span>,<span class="string">'kiwi'</span>,<span class="string">'peach'</span>,<span class="string">'pear'</span>,<span class="string">'NOTUSED'</span>};
	s.rlab={<span class="string">'sweet'</span>,<span class="string">'sour'</span>,<span class="string">'salty'</span>,<span class="string">'bitter'</span>};

	cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-Lc'</span>,	s.clab);
</pre><pre class="codeoutput">apple orange banana   kiwi  peach   pear
    1      5      9     13     17     21
    2      6     10     14     18     22
    3      7     11     15     19     23
    4      8     12     16     20     24
</pre><pre class="codeinput">	cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-Lr'</span>,	s.rlab);
</pre><pre class="codeoutput"> sweet 1  5  9 13 17 21
  sour 2  6 10 14 18 22
 salty 3  7 11 15 19 23
bitter 4  8 12 16 20 24
</pre><pre class="codeinput">	cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-Lr'</span>,	s.rlab,<span class="keyword">...</span>
		<span class="string">'-Lc'</span>,	s.clab,<span class="keyword">...</span>
		<span class="string">'-Lcs'</span>,	<span class="string">'='</span>);
</pre><pre class="codeoutput">       apple orange banana   kiwi  peach   pear
===============================================
 sweet     1      5      9     13     17     21
  sour     2      6     10     14     18     22
 salty     3      7     11     15     19     23
bitter     4      8     12     16     20     24
</pre><pre class="codeinput">	cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-Lr'</span>,	s.rlab,<span class="keyword">...</span>
		<span class="string">'-Lc'</span>,	s.clab,<span class="keyword">...</span>
		<span class="string">'-Lrs'</span>,	<span class="string">'|'</span>,<span class="keyword">...</span>
		<span class="string">'-Lcs'</span>,	<span class="string">'='</span>,<span class="keyword">...</span>
		<span class="string">'-Lh'</span>,	{<span class="string">'A table'</span>});
</pre><pre class="codeoutput">A table |  apple orange banana   kiwi  peach   pear
===================================================
  sweet |      1      5      9     13     17     21
   sour |      2      6     10     14     18     22
  salty |      3      7     11     15     19     23
 bitter |      4      8     12     16     20     24
</pre><pre class="codeinput"><span class="comment">% alignment of CELL content</span>
<span class="comment">% by default, each CELL's content is right aligned within the cols max width</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -la:		left align				T|F	[F]</span>

	cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-Lr'</span>,	s.rlab,<span class="keyword">...</span>
		<span class="string">'-Lc'</span>,	s.clab,<span class="keyword">...</span>
		<span class="string">'-Lrs'</span>,	<span class="string">'|'</span>,<span class="keyword">...</span>
		<span class="string">'-Lcs'</span>,	<span class="string">'='</span>,<span class="keyword">...</span>
		<span class="string">'-la'</span>,	1);
</pre><pre class="codeoutput">       | apple  orange banana kiwi   peach  pear  
==================================================
sweet  | 1      5      9      13     17     21    
sour   | 2      6      10     14     18     22    
salty  | 3      7      11     15     19     23    
bitter | 4      8      12     16     20     24    
</pre><pre class="codeinput"><span class="comment">% widths of CELL content</span>
<span class="comment">% by default, the width of all CELLs is the max of all CELLs' width</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -ic		adjust each column width according	T|F	[F]</span>
<span class="comment">%		to its max CELL width</span>

	cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-Lr'</span>,	s.rlab,<span class="keyword">...</span>
		<span class="string">'-Lc'</span>,	s.clab,<span class="keyword">...</span>
		<span class="string">'-Lrs'</span>,	<span class="string">'|'</span>,<span class="keyword">...</span>
		<span class="string">'-Lcs'</span>,	<span class="string">'='</span>,<span class="keyword">...</span>
		<span class="string">'-ic'</span>,	1);
</pre><pre class="codeoutput">       | apple orange banana kiwi peach pear
============================================
 sweet |     1      5      9   13    17   21
  sour |     2      6     10   14    18   22
 salty |     3      7     11   15    19   23
bitter |     4      8     12   16    20   24
</pre><pre class="codeinput"><span class="comment">% CELL separators</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -d		CELL separator				'csep'</span>
<span class="comment">% -dt		CELL separator of table body CELLs only	'csep'</span>

	cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-Lr'</span>,	s.rlab,<span class="keyword">...</span>
		<span class="string">'-Lc'</span>,	s.clab,<span class="keyword">...</span>
		<span class="string">'-Lrs'</span>,	<span class="string">'|'</span>,<span class="keyword">...</span>
		<span class="string">'-Lcs'</span>,	<span class="string">'='</span>,<span class="keyword">...</span>
		<span class="string">'-d'</span>,	<span class="string">'&lt;.&gt;'</span>);				<span class="comment">% global CELL separator</span>
</pre><pre class="codeoutput">      &lt;.&gt;|&lt;.&gt; apple&lt;.&gt;orange&lt;.&gt;banana&lt;.&gt;  kiwi&lt;.&gt; peach&lt;.&gt;  pear
================================================================
 sweet&lt;.&gt;|&lt;.&gt;     1&lt;.&gt;     5&lt;.&gt;     9&lt;.&gt;    13&lt;.&gt;    17&lt;.&gt;    21
  sour&lt;.&gt;|&lt;.&gt;     2&lt;.&gt;     6&lt;.&gt;    10&lt;.&gt;    14&lt;.&gt;    18&lt;.&gt;    22
 salty&lt;.&gt;|&lt;.&gt;     3&lt;.&gt;     7&lt;.&gt;    11&lt;.&gt;    15&lt;.&gt;    19&lt;.&gt;    23
bitter&lt;.&gt;|&lt;.&gt;     4&lt;.&gt;     8&lt;.&gt;    12&lt;.&gt;    16&lt;.&gt;    20&lt;.&gt;    24
</pre><pre class="codeinput"><span class="comment">% using different separators in a table</span>

	cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-Lr'</span>,	s.rlab,<span class="keyword">...</span>
		<span class="string">'-Lc'</span>,	s.clab,<span class="keyword">...</span>
		<span class="string">'-Lrs'</span>,	<span class="string">'#'</span>,<span class="keyword">...</span>
		<span class="string">'-Lcs'</span>,	<span class="string">'='</span>,<span class="keyword">...</span>
		<span class="string">'-dt'</span>,	<span class="string">'|'</span>,<span class="keyword">...</span><span class="comment">				% table body CELLs' separator</span>
		<span class="string">'-d'</span>,	<span class="string">'.'</span>);				<span class="comment">% global CELL separator</span>
</pre><pre class="codeoutput">      .#. apple|orange|banana|  kiwi| peach|  pear
==================================================
 sweet.#.     1|     5|     9|    13|    17|    21
  sour.#.     2|     6|    10|    14|    18|    22
 salty.#.     3|     7|    11|    15|    19|    23
bitter.#.     4|     8|    12|    16|    20|    24
</pre><pre class="codeinput"><span class="comment">% if the separators contain TAB(s), CELL separators will not be continuous</span>
<span class="comment">%    for reasons of consistency</span>

	cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-Lr'</span>,	s.rlab,<span class="keyword">...</span>
		<span class="string">'-Lc'</span>,	s.clab,<span class="keyword">...</span>
		<span class="string">'-Lrs'</span>,	<span class="string">'|'</span>,<span class="keyword">...</span>
		<span class="string">'-Lcs'</span>,	<span class="string">'='</span>,<span class="keyword">...</span>
		<span class="string">'-dt'</span>,	<span class="string">'|'</span>,<span class="keyword">...</span><span class="comment">				% table body CELLs' separator</span>
		<span class="string">'-d'</span>,	<span class="string">'\t'</span>);				<span class="comment">% global CELL separator</span>
</pre><pre class="codeoutput">      	|	 apple|orange|banana|  kiwi| peach|  pear
======	=	======|======|======|======|======|======
 sweet	|	     1|     5|     9|    13|    17|    21
  sour	|	     2|     6|    10|    14|    18|    22
 salty	|	     3|     7|    11|    15|    19|    23
bitter	|	     4|     8|    12|    16|    20|    24
</pre><pre class="codeinput"><span class="comment">% formatting of numeric row/column labels (see also [-n] below)</span>

	s.cclab=s.clab;
	s.rrlab=s.rlab;
	s.cclab([1,2])={1,20};
	s.rrlab([1,4])={pi,-4*pi};
	s.cfmt=<span class="string">'col:%d'</span>;				<span class="comment">% a char spec</span>
	s.rfmt=@(x) sprintf(<span class="string">'row:%d/%8.4f'</span>,sign(x),x);	<span class="comment">% a function handle</span>

	cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-Lr'</span>,	s.rrlab,<span class="keyword">...</span>
		<span class="string">'-Lc'</span>,	s.cclab,<span class="keyword">...</span>
		<span class="string">'-Lrs'</span>,	<span class="string">'|'</span>,<span class="keyword">...</span>
		<span class="string">'-Lcs'</span>,	<span class="string">'='</span>,<span class="keyword">...</span>
		<span class="string">'-nc'</span>,	s.cfmt,<span class="keyword">...</span>
		<span class="string">'-nr'</span>,	s.rfmt);
</pre><pre class="codeoutput">                |  col:1 col:20 banana   kiwi  peach   pear
===========================================================
 row:1/  3.1416 |      1      5      9     13     17     21
           sour |      2      6     10     14     18     22
          salty |      3      7     11     15     19     23
row:-1/-12.5664 |      4      8     12     16     20     24
</pre><h2>--- creating tables using the default format<a name="22"></a></h2><pre class="codeinput"><span class="comment">% an array can be displayed as a table using default options</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -mt		create a table				T|F	[F]</span>

	cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1);
</pre><pre class="codeoutput">    | c:1 c:2 c:3 c:4 c:5 c:6
-----------------------------
r:1 |   1   5   9  13  17  21
r:2 |   2   6  10  14  18  22
r:3 |   3   7  11  15  19  23
r:4 |   4   8  12  16  20  24
</pre><pre class="codeinput"><span class="comment">% any row [-Lr]/[-Lrs] and/or column option [-Lc]/[-Lcs] overrides</span>
<span class="comment">%    the default option</span>

	cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-Lcs'</span>,	<span class="string">'='</span>,<span class="keyword">...</span>
		<span class="string">'-Lr'</span>,	s.rlab,<span class="keyword">...</span>
		<span class="string">'-Lh'</span>,	{<span class="string">'TBL.1'</span>});
</pre><pre class="codeoutput">TBL.1  | c:1 c:2 c:3 c:4 c:5 c:6
================================
 sweet |   1   5   9  13  17  21
  sour |   2   6  10  14  18  22
 salty |   3   7  11  15  19  23
bitter |   4   8  12  16  20  24
</pre><h2>--- printing arrays that contain a predefined table<a name="24"></a></h2><pre class="codeinput"><span class="comment">% an input cell array, which is already in the format of a complete table,</span>
<span class="comment">%    can be displayed using the auto-formatting option</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -it		assumes the input is a complete table	T|F	[F]</span>
<span class="comment">%		consisting of</span>
<span class="comment">%		- col labels and separators</span>
<span class="comment">%		- row labels and separators</span>

	s.tbl={
<span class="comment">%	row	row</span>
<span class="comment">%	labels	separators</span>
	<span class="string">'tbl'</span>,	<span class="string">'|'</span>,		<span class="string">'C1'</span>,<span class="string">'C2'</span>,<span class="string">'C3'</span>,<span class="string">'C4'</span>,<span class="string">'C5'</span>,<span class="string">'C6'</span>	<span class="comment">% col labels</span>
	<span class="string">'='</span>,	<span class="string">'='</span>,		<span class="string">'='</span>,<span class="string">'-'</span>,<span class="string">'='</span>,<span class="string">'sep'</span>,<span class="string">'='</span>,<span class="string">'-'</span>	<span class="comment">% col separators</span>
	<span class="string">'R1'</span>,	<span class="string">'sep'</span>,		1,2,3,4,5,6
	<span class="string">'R2'</span>,	<span class="string">'#'</span>,		1,2,3,4,5,6
	};

<span class="comment">% raw output of the cell</span>

	disp(s.tbl);
	cprintf(s.tbl);
</pre><pre class="codeoutput">    'tbl'    '|'      'C1'    'C2'    'C3'    'C4'     'C5'    'C6'
    '='      '='      '='     '-'     '='     'sep'    '='     '-' 
    'R1'     'sep'    [ 1]    [ 2]    [ 3]    [  4]    [ 5]    [ 6]
    'R2'     '#'      [ 1]    [ 2]    [ 3]    [  4]    [ 5]    [ 6]

tbl   |  C1  C2  C3  C4  C5  C6
  =   =   =   -   = sep   =   -
 R1 sep   1   2   3   4   5   6
 R2   #   1   2   3   4   5   6
</pre><pre class="codeinput"><span class="comment">% output as a table</span>

<span class="comment">% NOTE:	single char col separators are repeated to the width of each col</span>
<span class="comment">%	multi  char col separators are printed according to the [-la] option</span>
<span class="comment">%	the [-ic] CELL width option may be applied</span>

	cprintf(s.tbl,<span class="keyword">...</span>
		<span class="string">'-it'</span>,	1);
</pre><pre class="codeoutput">tbl   |  C1  C2  C3  C4  C5  C6
===========----==== sep====----
 R1 sep   1   2   3   4   5   6
 R2   #   1   2   3   4   5   6
</pre><pre class="codeinput"><span class="comment">% any row [-Lr]/[-Lrs] and/or column option [-Lc]/[-Lcs] overrides</span>
<span class="comment">%    the default option</span>

	cprintf(s.tbl,<span class="keyword">...</span>
		<span class="string">'-it'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-Lr'</span>,	{<span class="string">'a'</span>,<span class="string">'b'</span>},<span class="keyword">...</span>
		<span class="string">'-Lcs'</span>,	<span class="string">'*'</span>);
</pre><pre class="codeoutput">tbl   | C1 C2 C3 C4 C5 C6
*************************
  a sep  1  2  3  4  5  6
  b   #  1  2  3  4  5  6
</pre><h2>--- leading and trailing text<a name="27"></a></h2><pre class="codeinput"><span class="comment">% text can be added before or after an array or table</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -L		leading  text				character string</span>
<span class="comment">% -T		trailing text				character string</span>

	cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-L'</span>,	<span class="string">'row\t'</span>);
</pre><pre class="codeoutput">row	 1  5  9 13 17 21
row	 2  6 10 14 18 22
row	 3  7 11 15 19 23
row	 4  8 12 16 20 24
</pre><pre class="codeinput">	cprintf(s.tbl,<span class="keyword">...</span>
		<span class="string">'-it'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-L'</span>,	<span class="string">'my rows\t'</span>,<span class="keyword">...</span>
		<span class="string">'-T'</span>,	<span class="string">'\teor'</span>);
</pre><pre class="codeoutput">my rows	tbl   |  C1  C2  C3  C4  C5  C6	eor
my rows	===========----==== sep====----	eor
my rows	 R1 sep   1   2   3   4   5   6	eor
my rows	 R2   #   1   2   3   4   5   6	eor
</pre><h2>CELL conversion options<a name="29"></a></h2><pre class="codeinput"><span class="comment">% NOTE: the [-mt] option is used throughout for ease of visibility</span>
</pre><h2>--- 2D character arrays and ND cell arrays of ND character strings<a name="30"></a></h2><pre class="codeinput"><span class="comment">% by default, Mx1 or ND character strings are expanded to 2D arrays</span>
<span class="comment">%    before conversion</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -nex		do NOT expand				T|F	[F]</span>
<span class="comment">%		use [-O] option display style</span>

<span class="comment">% a simple array of character strings</span>

	s.sc=[
		<span class="string">'this is a'</span>
		<span class="string">'  test   '</span>
	];

<span class="comment">% white spaces are kept and the [-la] option has NO effect</span>

	cprintf(s.sc,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-la'</span>,	1);				<span class="comment">% left align</span>
</pre><pre class="codeoutput">    | c:1      
---------------
r:1 | this is a
r:2 |   test   
</pre><pre class="codeinput"><span class="comment">% a cell array of 1xN character strings</span>

	s.cs={
		<span class="string">'this is'</span>	<span class="string">'yet another'</span>
		<span class="string">'test'</span>		<span class="string">'    example'</span>		<span class="comment">% (2,2) has SPACEs!</span>
	};

	cprintf(s.cs,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1);
</pre><pre class="codeoutput">    |         c:1         c:2
-----------------------------
r:1 |     this is yet another
r:2 |        test     example
</pre><pre class="codeinput"><span class="comment">% NOTE:	the [-la] option has an effect EXCEPT for embedded SPACEs</span>

	cprintf(s.cs,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-la'</span>,	1);				<span class="comment">% left align</span>
</pre><pre class="codeoutput">    | c:1         c:2        
-----------------------------
r:1 | this is     yet another
r:2 | test            example
</pre><pre class="codeinput"><span class="comment">% a cell array of mixed MxN character strings</span>

	s.ndcs={<span class="string">'foo'</span>,<span class="string">'GOO'</span>.';<span class="string">'HOO'</span>.',<span class="string">'ioo'</span>};

	disp(s.ndcs);
</pre><pre class="codeoutput">    'foo'         [3x1 char]
    [3x1 char]    'ioo'     

</pre><pre class="codeinput"><span class="comment">% NOTE:	placeholders for 1xN character arrays</span>

	cprintf(s.ndcs,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-la'</span>,	1,<span class="keyword">...</span><span class="comment">				% left align</span>
		<span class="string">'-d'</span>,	<span class="string">'\t'</span>);				<span class="comment">% delimiter: TAB</span>
</pre><pre class="codeoutput">   	|	c:1	c:2
---	-	---	---
r:1	|	foo	G  
r:2	|	   	O  
r:3	|	   	O  
r:4	|	H  	ioo
r:5	|	O  	   
r:6	|	O  	   
</pre><pre class="codeinput">	s.ndsc={
		s.sc,		[s.sc;s.sc;s.sc],	s.sc
		s.sc,		<span class="string">'FOO'</span>,			[s.sc;s.sc]
		<span class="string">'XXX'</span>.',	s.sc			[s.sc;s.sc]
	};

	disp(s.ndsc);
</pre><pre class="codeoutput">    [2x9 char]    [6x9 char]    [2x9 char]
    [2x9 char]    'FOO'         [4x9 char]
    [3x1 char]    [2x9 char]    [4x9 char]

</pre><pre class="codeinput">	cprintf(s.ndsc,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-la'</span>,	1,<span class="keyword">...</span><span class="comment">				% left align</span>
		<span class="string">'-d'</span>,	<span class="string">'   '</span>);				<span class="comment">% delimiter: 3 SPACEs</span>
</pre><pre class="codeoutput">       |   c:1         c:2         c:3      
--------------------------------------------
r:01   |   this is a   this is a   this is a
r:02   |     test        test        test   
r:03   |               this is a            
r:04   |                 test               
r:05   |               this is a            
r:06   |                 test               
r:07   |   this is a   FOO         this is a
r:08   |     test                    test   
r:09   |                           this is a
r:10   |                             test   
r:11   |   X           this is a   this is a
r:12   |   X             test        test   
r:13   |   X                       this is a
r:14   |                             test   
</pre><pre class="codeinput"><span class="comment">% a ND cell array of MxN character strings</span>

	s.ndnd(:,:,1)=s.ndsc;
	s.ndnd(:,:,2)=s.ndsc;

	disp(s.ndnd);
</pre><pre class="codeoutput">
(:,:,1) = 

    [2x9 char]    [6x9 char]    [2x9 char]
    [2x9 char]    'FOO'         [4x9 char]
    [3x1 char]    [2x9 char]    [4x9 char]


(:,:,2) = 

    [2x9 char]    [6x9 char]    [2x9 char]
    [2x9 char]    'FOO'         [4x9 char]
    [3x1 char]    [2x9 char]    [4x9 char]

</pre><pre class="codeinput">	cprintf(s.ndnd,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-dt'</span>,	<span class="string">'|'</span>);
</pre><pre class="codeoutput">     |       c:1|      c:2|      c:3
------------------------------------
r:01 | this is a|this is a|this is a
r:02 |   test   |  test   |  test   
r:03 |          |this is a|         
r:04 |          |  test   |         
r:05 |          |this is a|         
r:06 |          |  test   |         
r:07 | this is a|      FOO|this is a
r:08 |   test   |         |  test   
r:09 |          |         |this is a
r:10 |          |         |  test   
r:11 |         X|this is a|this is a
r:12 |         X|  test   |  test   
r:13 |         X|         |this is a
r:14 |          |         |  test   
r:15 | this is a|this is a|this is a
r:16 |   test   |  test   |  test   
r:17 |          |this is a|         
r:18 |          |  test   |         
r:19 |          |this is a|         
r:20 |          |  test   |         
r:21 | this is a|      FOO|this is a
r:22 |   test   |         |  test   
r:23 |          |         |this is a
r:24 |          |         |  test   
r:25 |         X|this is a|this is a
r:26 |         X|  test   |  test   
r:27 |         X|         |this is a
r:28 |          |         |  test   
</pre><pre class="codeinput"><span class="comment">% do not expand non-1xN character strings</span>

	cprintf(s.ndnd,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-nex'</span>,	1);
</pre><pre class="codeoutput">    |           c:1           c:2           c:3
-----------------------------------------------
r:1 | O(2:2x9:char) O(2:6x9:char) O(2:2x9:char)
r:2 | O(2:2x9:char)           FOO O(2:4x9:char)
r:3 | O(2:3x1:char) O(2:2x9:char) O(2:4x9:char)
r:4 | O(2:2x9:char) O(2:6x9:char) O(2:2x9:char)
r:5 | O(2:2x9:char)           FOO O(2:4x9:char)
r:6 | O(2:3x1:char) O(2:2x9:char) O(2:4x9:char)
</pre><h2>--- full mixed real and/or complex numeric arrays<a name="40"></a></h2><pre class="codeinput"><span class="comment">% formatting options for numeric data (see section -formatting-)</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -n		real numbers				FS	['%g']</span>
<span class="comment">% -cr		real      part of complex numbers	FS	['%g']</span>
<span class="comment">% -ci		imaginary part of complex numbers	FS	['%+gi]</span>
<span class="comment">% -cd		delimiter between real/imaginary part	FS	[' ']</span>
<span class="comment">% -cla		left align imaginary parts		T|F	[F]</span>

	s.m=[
		1,		2,		3+3i
		nan-4.2i,	nan,		inf
		-inf,		inf+3i*inf,	inf+5.5i
	];

	disp(num2cell(s.m));
</pre><pre class="codeoutput">    [                1]    [          2]    [  3 +          3i]
    [NaN -        4.2i]    [        NaN]    [              Inf]
    [             -Inf]    [NaN +  Infi]    [Inf +        5.5i]

</pre><pre class="codeinput"><span class="comment">% unlike DISP, CPRINTF prints real numbers</span>
<span class="comment">%    at the position of the real part of the complex number</span>
<span class="comment">%    for reasons of consistency</span>
<span class="comment">% column widths of real and imaginary parts are adjusted to the respective max</span>
<span class="comment">%    width of each component (see c:2)</span>

	cprintf(s.m,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1);
</pre><pre class="codeoutput">    |        c:1        c:2        c:3
--------------------------------------
r:1 |    1          2          3   +3i
r:2 |  NaN -4.2i  NaN        Inf      
r:3 | -Inf        NaN +Infi  Inf +5.5i
</pre><pre class="codeinput"><span class="comment">% left align imaginary parts of complex numbers [-cla]</span>

	cprintf(s.m,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-cla'</span>,	1);
</pre><pre class="codeoutput">    |        c:1        c:2        c:3
--------------------------------------
r:1 | 1          2          3    +3i  
r:2 | NaN  -4.2i NaN        Inf       
r:3 | -Inf       NaN  +Infi Inf  +5.5i
</pre><pre class="codeinput"><span class="comment">% using various numeric options</span>

<span class="comment">% NOTE:	only real numbers use the [-n] option</span>
<span class="comment">%	the [-cd] separator is applied to ALL numbers</span>

	cprintf(s.m,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-n'</span>,	@(x) sprintf(<span class="string">'%g=%s'</span>,x,num2hex(single(x))),<span class="keyword">...</span>
		<span class="string">'-cr'</span>,	<span class="string">'R %g'</span>,<span class="keyword">...</span>
		<span class="string">'-ci'</span>,	<span class="string">'I %+gi'</span>,<span class="keyword">...</span>
		<span class="string">'-cd'</span>,	<span class="string">' / '</span>);
</pre><pre class="codeoutput">    |                     c:1                     c:2                     c:3
-----------------------------------------------------------------------------
r:1 |    1=3f800000 /            2=40000000 /                   R 3 /   I +3i
r:2 |         R NaN / I -4.2i  NaN=ffc00000 /          Inf=7f800000 /        
r:3 | -Inf=ff800000 /                 R NaN / I +Infi         R Inf / I +5.5i
</pre><h2>--- sparse mixed real and/or complex numeric arrays<a name="44"></a></h2><pre class="codeinput"><span class="comment">% sparse arrays are displayed in accordance with ML's DISP functionality</span>
<span class="comment">% col 1		indices</span>
<span class="comment">% col 2		values</span>
<span class="comment">%</span>
<span class="comment">% formatting options for numeric data (see section -formatting-)</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -s		sparse indices must take TWO args	FS	[('%g %g)']</span>

	s.s=sparse(4,4);

<span class="comment">% output of empty sparse arrays show max indices with a value of zero</span>

	cprintf(s.s,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1);
</pre><pre class="codeoutput">    |   c:1   c:2
-----------------
r:1 | (4 4)     0
</pre><pre class="codeinput">	s.s(1,1)=nan;
	s.s(1,2)=inf;
	s.s(1,3)=-inf;
	s.s(1,4)=pi;
	s.s(2,1)=4+3i;
	s.s(2,2)=5+4i*inf;
	s.s(2,3)=6+5i*nan;

	disp(s.s);
</pre><pre class="codeoutput">   (1,1)             NaN              
   (2,1)               4 +          3i
   (1,2)             Inf              
   (2,2)             NaN +        Infi
   (1,3)            -Inf              
   (2,3)             NaN +        NaNi
   (1,4)          3.1416              

</pre><pre class="codeinput">	cprintf(s.s,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1);
</pre><pre class="codeoutput">    |           c:1           c:2
---------------------------------
r:1 |         (1 1)     NaN      
r:2 |         (2 1)       4   +3i
r:3 |         (1 2)     Inf      
r:4 |         (2 2)     NaN +Infi
r:5 |         (1 3)    -Inf      
r:6 |         (2 3)     NaN  NaNi
r:7 |         (1 4) 3.14159      
</pre><pre class="codeinput"><span class="comment">% using various options</span>

	cprintf(s.s,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-ic'</span>,	1,<span class="keyword">...</span><span class="comment">				% use individual col width</span>
		<span class="string">'-n'</span>,	<span class="string">'    value: %6.2f'</span>,<span class="keyword">...</span><span class="comment">		% real numbers</span>
		<span class="string">'-cr'</span>,	<span class="string">'    value: %6.2f'</span>,<span class="keyword">...</span><span class="comment">		% real part of complex numbers</span>
		<span class="string">'-s'</span>,	@(x,y) sprintf(<span class="string">'R=%d C=%d'</span>,x,y));
</pre><pre class="codeoutput">    |     c:1                     c:2
-------------------------------------
r:1 | R=1 C=1     value:    NaN      
r:2 | R=2 C=1     value:   4.00   +3i
r:3 | R=1 C=2     value:    Inf      
r:4 | R=2 C=2     value:    NaN +Infi
r:5 | R=1 C=3     value:   -Inf      
r:6 | R=2 C=3     value:    NaN  NaNi
r:7 | R=1 C=4     value:   3.14      
</pre><h2>--- logical arrays<a name="48"></a></h2><pre class="codeinput"><span class="comment">% formatting options for logical data (see section -formatting-)</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -t		TRUE  values				FS	['T']</span>
<span class="comment">% -f		FALSE values				FS	['F']</span>

	cprintf(real(s.m)&gt;4,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1);
</pre><pre class="codeoutput">    | c:1 c:2 c:3
-----------------
r:1 |   F   F   F
r:2 |   F   F   T
r:3 |   F   F   T
</pre><pre class="codeinput">	cprintf(imag(s.m)&lt;1,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-f'</span>,	<span class="string">'NO'</span>,<span class="keyword">...</span>
		<span class="string">'-t'</span>,	<span class="string">'yes'</span>);
</pre><pre class="codeoutput">    | c:1 c:2 c:3
-----------------
r:1 | yes yes  NO
r:2 | yes yes yes
r:3 | yes  NO  NO
</pre><h2>--- NaN/Inf<a name="50"></a></h2><pre class="codeinput"><span class="comment">% formatting options for NaN/Inf (see section -formatting-)</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -N:		NaN      values				FS	[ML def]</span>
<span class="comment">% -I:		-Inf/Inf values				FS	[ML def]</span>
<span class="comment">%</span>
<span class="comment">% NOTE:	[-N] and/or [-I] options override ALL other options for numeric</span>
<span class="comment">%	data types for reasons of consistency</span>

	cprintf(s.m,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-d'</span>,	<span class="string">'\t'</span>);				<span class="comment">% use TAB as CELL separator</span>
</pre><pre class="codeoutput">   	|	       c:1	       c:2	       c:3
---	-	----------	----------	----------
r:1	|	   1      	   2      	   3   +3i
r:2	|	 NaN -4.2i	 NaN      	 Inf      
r:3	|	-Inf      	 NaN +Infi	 Inf +5.5i
</pre><pre class="codeinput"><span class="comment">% using various options</span>

	cprintf(s.m,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-d'</span>,	<span class="string">'\t'</span>,<span class="keyword">...</span><span class="comment">			% use TAB as CELL separator</span>
		<span class="string">'-n'</span>,	<span class="string">'%5.2f'</span>,<span class="keyword">...</span><span class="comment">			% real numbers</span>
		<span class="string">'-N'</span>,	<span class="string">'#fff#'</span>,<span class="keyword">...</span><span class="comment">			% NaNs, eg, for a spreadsheet</span>
		<span class="string">'-I'</span>,	@(x) sprintf(<span class="string">'%dI'</span>,sign(x)),<span class="keyword">...</span><span class="comment">	% Infs</span>
		<span class="string">'-ci'</span>,	<span class="string">'%5.2fi'</span>);			<span class="comment">% imaginary part of complex numbers</span>
</pre><pre class="codeoutput">   	|	         c:1	         c:2	         c:3
---	-	------------	------------	------------
r:1	|	 1.00       	 2.00       	    3  3.00i
r:2	|	#fff# -4.20i	#fff#       	   1I       
r:3	|	  -1I       	#fff#     1I	   1I  5.50i
</pre><h2>--- hexadecimal representation of numeric input<a name="52"></a></h2><pre class="codeinput"><span class="comment">% conversion to singles/doubles IEEE hexadecimal strings</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -hs		all numeric CELLs are converted to</span>
<span class="comment">%		   single hex				T|F	[F]</span>
<span class="comment">% -hd		   double hex				T|F	[F]</span>

	cprintf(s.m,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-hs'</span>,	1);
</pre><pre class="codeoutput">    |               c:1               c:2               c:3
-----------------------------------------------------------
r:1 | 3f800000          40000000          40400000 40400000
r:2 | ffc00000 c0866666 ffc00000          7f800000         
r:3 | ff800000          ffc00000 7f800000 7f800000 40b00000
</pre><h2>cell arrays<a name="53"></a></h2><pre class="codeinput"><span class="comment">% ALL CELLs of a cell array are formatted according to the above formatting rules</span>
<span class="comment">% if a CELL contains complex data, ALL numbers will be displayed using</span>
<span class="comment">%    the complex spacing mode (see above)</span>
<span class="comment">% if a CELL contains sparse data, it is converted to full</span>
<span class="comment">%    prior to conversion</span>
<span class="comment">% a cell array of any (mixed) content can be displayed as a table</span>

	s.ss=sparse(1,1,-pi);
	s.cc={
		<span class="string">'this'</span>,		<span class="string">'is'</span>,	false,	2-3i,	nan
		<span class="string">'a cell'</span>,	pi,	1000,	s.ss,	true
	};

	cprintf(s.cc,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1);
</pre><pre class="codeoutput">    |          c:1          c:2          c:3          c:4          c:5
----------------------------------------------------------------------
r:1 |         this           is            F        2 -3i      NaN    
r:2 |       a cell  3.14159         1000     -3.14159                T
</pre><h2>--- empty CELLs and other data types<a name="54"></a></h2><pre class="codeinput"><span class="comment">% formatting options for empty CELLs and other data types</span>
<span class="comment">%    (see section -formatting-)</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -E		empty CELLs				FS	['E(class)']</span>
<span class="comment">%		EXCEPT empty character strings</span>
<span class="comment">% -O		other data types			FS	[built-in]</span>
<span class="comment">%		including ND arrays of any type</span>
<span class="comment">%		default output according to the input</span>
<span class="comment">%		logical:	L(dim:size:class)</span>
<span class="comment">%		numeric:	N(dim:size:class.g.s.c)</span>
<span class="comment">%		      g:	is global</span>
<span class="comment">%		      s:	is sparse</span>
<span class="comment">%		      c:	is complex</span>
<span class="comment">%		cell   :	C(dim:size:class)</span>
<span class="comment">%		struct :	S(dim:size:class)</span>
<span class="comment">%		func   :	F(@function)</span>
<span class="comment">%		other  :	O(dim:size:class)</span>
<span class="comment">% -Or		only show content within brackets, eg,	T|F	[F]</span>
<span class="comment">%		to save function handle definitions</span>
<span class="comment">%		in an ASCII file</span>

<span class="comment">% NOTE:	the [-O] option will be applied to ALL other data types</span>
<span class="comment">%	the engine structure returns a function handle, which</span>
<span class="comment">%	may be used to check conversion (see section -macros-)</span>
<span class="comment">%</span>
<span class="comment">%		p=cprintf;	% returns the engine structure</span>
<span class="comment">%		r=p.other(magic(3)+4i)</span>
<span class="comment">%		r = N(2:3x3:double.c)</span>
<span class="comment">%</span>
<span class="comment">%	users can write their own functions, which must return</span>
<span class="comment">%	a 1xN character string</span>
<span class="comment">%</span>
<span class="comment">%		cprintf(...,'-O',@myother)</span>

<span class="comment">% NOTE:	difference of default output of various empty/other data</span>

	cprintf([],<span class="keyword">...</span>
		<span class="string">'-Lr'</span>,	{<span class="string">'empty array             []'</span>},<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1);

	cprintf({[]},<span class="keyword">...</span>
		<span class="string">'-Lr'</span>,	{<span class="string">'cell with empty array {[]}'</span>},<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1);

	cprintf({},<span class="keyword">...</span>
		<span class="string">'-Lr'</span>,	{<span class="string">'empty cell              {}'</span>},<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1);

	cprintf({{}},<span class="keyword">...</span>
		<span class="string">'-Lr'</span>,	{<span class="string">'cell with empty cell  {{}}'</span>},<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1);
</pre><pre class="codeoutput">                           |       c:1
--------------------------------------
empty array             [] | E(double)
                           |       c:1
--------------------------------------
cell with empty array {[]} | E(double)
                           |     c:1
------------------------------------
empty cell              {} | E(cell)
                           |      c:1
-------------------------------------
cell with empty cell  {{}} | C(2:0x0)
</pre><pre class="codeinput">	s.cc(1,1)={@(x) x};
	s.cc(1,3)={[]};
	s.cc(2,3)={sparse(3,3,-pi)};
	s.cc(2,1)={repmat(struct(<span class="string">'a'</span>,<span class="string">'b'</span>),[2,3,3])};
	s.cc(3,1)={cell([3,3,3])};
	s.cc(3,2)={s.cc};
	s.cc(3,3)={repmat(struct(<span class="string">'a'</span>,{<span class="string">'a'</span>}),[2,2,3])};

	disp(s.cc);
</pre><pre class="codeoutput">  Columns 1 through 4

    @(x)x             'is'                      []    [2 -          3i]
    [2x3x3 struct]    [  3.1416]    [3x3   double]    [        -3.1416]
    {3x3x3 cell  }    {3x5 cell}    [2x2x3 struct]                   []

  Column 5

    [NaN]
    [  1]
       []

</pre><pre class="codeinput">	cprintf(s.cc,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1);
</pre><pre class="codeoutput">    |             c:1             c:2             c:3             c:4             c:5
-------------------------------------------------------------------------------------
r:1 |        F(@(x)x)              is       E(double)           2 -3i         NaN    
r:2 |      S(3:2x3x3)     3.14159     N(2:3x3:double)    -3.14159                   T
r:3 |      C(3:3x3x3)        C(2:3x5)      S(3:2x2x3)       E(double)       E(double)
</pre><pre class="codeinput"><span class="comment">% using [-E]/[-O] options</span>

	s.O=@(x) sprintf(<span class="string">'o:%d/%s'</span>,ndims(x),class(x));

	cprintf(s.cc,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-E'</span>,	<span class="string">'empty'</span>,<span class="keyword">...</span><span class="comment">			% EMPYT CELLs</span>
		<span class="string">'-O'</span>,	s.O);				<span class="comment">% OTHER CELL content</span>
</pre><pre class="codeoutput">    |                 c:1                 c:2                 c:3                 c:4                 c:5
---------------------------------------------------------------------------------------------------------
r:1 | o:2/function_handle                  is               empty               2 -3i             NaN    
r:2 |          o:3/struct         3.14159              o:2/double        -3.14159                       T
r:3 |            o:3/cell            o:2/cell          o:3/struct               empty               empty
</pre><h2>--- surrounding text of CELLs<a name="58"></a></h2><pre class="codeinput"><span class="comment">% CELLs may be displayed with an additional surrounding text</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -C		surrounding of EACH CELL		FS	['%s']</span>
<span class="comment">%		including labels and separators</span>
<span class="comment">% -Ct		surrounding of table body CELLs only	FS	['%s']</span>

<span class="comment">% NOTE:	FS must only contain %s format specs</span>

<span class="comment">% embedding all CELLs</span>

	cprintf(s.m,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-C'</span>,	<span class="string">'&lt;%s&gt;'</span>);
</pre><pre class="codeoutput">&lt; &gt;   &lt;|&gt;        &lt;c:1&gt;        &lt;c:2&gt;        &lt;c:3&gt;
------------------------------------------------
&lt;r:1&gt; &lt;|&gt; &lt;   1      &gt; &lt;   2      &gt; &lt;   3   +3i&gt;
&lt;r:2&gt; &lt;|&gt; &lt; NaN -4.2i&gt; &lt; NaN      &gt; &lt; Inf      &gt;
&lt;r:3&gt; &lt;|&gt; &lt;-Inf      &gt; &lt; NaN +Infi&gt; &lt; Inf +5.5i&gt;
</pre><pre class="codeinput"><span class="comment">% only embedding table body CELLs</span>

	cprintf(s.m,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-Ct'</span>,	<span class="string">'{%s\t}'</span>);
</pre><pre class="codeoutput">    |                  c:1                  c:2                  c:3
--------------------------------------------------------------------
r:1 | {   1              } {   2              } {   3   +3i        }
r:2 | { NaN -4.2i        } { NaN              } { Inf              }
r:3 | {-Inf              } { NaN +Infi        } { Inf +5.5i        }
</pre><h2>ND arrays<a name="60"></a></h2><pre class="codeinput"><span class="comment">% ND arrays are displayed according to ML's display rules</span>
<span class="comment">%    all arrays are converted to their 2D equivalent</span>
<span class="comment">%</span>

	s.nda=reshape(1:2*4*2*2*2,[2,4,2,2,2]);

	disp(s.nda);
</pre><pre class="codeoutput">
(:,:,1,1,1) =

     1     3     5     7
     2     4     6     8


(:,:,2,1,1) =

     9    11    13    15
    10    12    14    16


(:,:,1,2,1) =

    17    19    21    23
    18    20    22    24


(:,:,2,2,1) =

    25    27    29    31
    26    28    30    32


(:,:,1,1,2) =

    33    35    37    39
    34    36    38    40


(:,:,2,1,2) =

    41    43    45    47
    42    44    46    48


(:,:,1,2,2) =

    49    51    53    55
    50    52    54    56


(:,:,2,2,2) =

    57    59    61    63
    58    60    62    64

</pre><pre class="codeinput">	cprintf(s.nda,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1);
</pre><pre class="codeoutput">     | c:1 c:2 c:3 c:4
----------------------
r:01 |   1   3   5   7
r:02 |   2   4   6   8
r:03 |   9  11  13  15
r:04 |  10  12  14  16
r:05 |  17  19  21  23
r:06 |  18  20  22  24
r:07 |  25  27  29  31
r:08 |  26  28  30  32
r:09 |  33  35  37  39
r:10 |  34  36  38  40
r:11 |  41  43  45  47
r:12 |  42  44  46  48
r:13 |  49  51  53  55
r:14 |  50  52  54  56
r:15 |  57  59  61  63
r:16 |  58  60  62  64
</pre><h2>ND cell arrays of mixed content<a name="62"></a></h2><pre class="codeinput"><span class="comment">% ND cell arrays are converted according to their CELL content</span>
<span class="comment">%    the cell array is converted to its 2D equivalent</span>

	s.cmc=reshape(num2cell(1:2*2*2*2),[2,2,2,2]);
	s.cmc(1,1,1,1)={magic(3)};
	s.cmc(2,2,1,1)={s.ndcs};
	s.cmc(1:2,1:2,2,1)=s.ndcs;
	s.cmc(1,1,1,2)={<span class="string">'foo'</span>};
	s.cmc(1:2,2,1,2)={false,true};
	s.cmc(1,1:2,2,2)={nan,-inf};
	s.cmc(2,1:2,2,2)={-100-2i,100+2i};

	disp(s.cmc);
</pre><pre class="codeoutput">
(:,:,1,1) = 

    [3x3 double]    [       3]
    [         2]    {2x2 cell}


(:,:,2,1) = 

    'foo'         [3x1 char]
    [3x1 char]    'ioo'     


(:,:,1,2) = 

    'foo'    [0]
    [ 10]    [1]


(:,:,2,2) = 

    [               NaN]    [             -Inf]
    [-100 -          2i]    [100 +          2i]

</pre><pre class="codeinput"><span class="comment">% NOTE:	display of vertical character strings</span>
<span class="comment">%	with proper spacing of other content</span>
<span class="comment">%	all numbers are displayed in complex style</span>

	cprintf(s.cmc,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-f'</span>,	<span class="string">'NO'</span>,<span class="keyword">...</span>
		<span class="string">'-t'</span>,	<span class="string">'YES'</span>,<span class="keyword">...</span>
		<span class="string">'-N'</span>,	<span class="string">'a nan'</span>,<span class="keyword">...</span>
		<span class="string">'-Ct'</span>,	<span class="string">'&lt;%s&gt;'</span>,<span class="keyword">...</span>
		<span class="string">'-dt'</span>,	<span class="string">' | '</span>,<span class="keyword">...</span>
		<span class="string">'-d'</span>,	<span class="string">'\t'</span>);
</pre><pre class="codeoutput">    	|	              c:1 |               c:2
----	-	----------------- | -----------------
r:01	|	&lt;N(2:3x3:double)&gt; |       &lt;    3    &gt;
r:02	|	      &lt;    2    &gt; |        &lt;C(2:2x2)&gt;
r:03	|	            &lt;foo&gt; |               &lt;G&gt;
r:04	|	               &lt;&gt; |               &lt;O&gt;
r:05	|	               &lt;&gt; |               &lt;O&gt;
r:06	|	              &lt;H&gt; |             &lt;ioo&gt;
r:07	|	              &lt;O&gt; |                &lt;&gt;
r:08	|	              &lt;O&gt; |                &lt;&gt;
r:09	|	            &lt;foo&gt; |              &lt;NO&gt;
r:10	|	      &lt;   10    &gt; |             &lt;YES&gt;
r:11	|	      &lt;a nan    &gt; |       &lt; -Inf    &gt;
r:12	|	      &lt; -100 -2i&gt; |       &lt;  100 +2i&gt;
</pre><h2>--- page indexing<a name="64"></a></h2><pre class="codeinput"><span class="comment">% a page index may be displayed, which adheres to the common ML display rules</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -nd		show page indices			T|F	[F]</span>

<span class="comment">% NOTE:	if the [-Lr] option is used, only data rows</span>
<span class="comment">%	must be labelled</span>
<span class="comment">%	page index rows are labelled 'page' by default</span>

	cprintf(s.nda,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-nd'</span>,	1);
</pre><pre class="codeoutput">     |             c:1             c:2             c:3             c:4
----------------------------------------------------------------------
page | (1:2,1:4,1,1,1)                                                
r:01 |               1               3               5               7
r:02 |               2               4               6               8
page | (1:2,1:4,2,1,1)                                                
r:03 |               9              11              13              15
r:04 |              10              12              14              16
page | (1:2,1:4,1,2,1)                                                
r:05 |              17              19              21              23
r:06 |              18              20              22              24
page | (1:2,1:4,2,2,1)                                                
r:07 |              25              27              29              31
r:08 |              26              28              30              32
page | (1:2,1:4,1,1,2)                                                
r:09 |              33              35              37              39
r:10 |              34              36              38              40
page | (1:2,1:4,2,1,2)                                                
r:11 |              41              43              45              47
r:12 |              42              44              46              48
page | (1:2,1:4,1,2,2)                                                
r:13 |              49              51              53              55
r:14 |              50              52              54              56
page | (1:2,1:4,2,2,2)                                                
r:15 |              57              59              61              63
r:16 |              58              60              62              64
</pre><pre class="codeinput">	cprintf(s.cmc,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-nd'</span>,	1);
</pre><pre class="codeoutput">     |             c:1             c:2
--------------------------------------
page |   (1:2,1:2,1,1)                
r:01 | N(2:3x3:double)           3    
r:02 |           2            C(2:2x2)
page |   (1:2,1:2,2,1)                
r:03 |             foo               G
r:04 |                               O
r:05 |                               O
r:06 |               H             ioo
r:07 |               O                
r:08 |               O                
page |   (1:2,1:2,1,2)                
r:09 |             foo               F
r:10 |          10                   T
page |   (1:2,1:2,2,2)                
r:11 |         NaN            -Inf    
r:12 |        -100 -2i         100 +2i
</pre><h2>ND structures<a name="66"></a></h2><pre class="codeinput"><span class="comment">% a (ND) structure is displayed in the form</span>
<span class="comment">%</span>
<span class="comment">%	fieldname separator fieldcontent</span>
<span class="comment">%</span>
<span class="comment">% any content of a field is formatted according to the CELL formatting rules</span>
<span class="comment">% if the table option [-mt] is used, both fieldname(s) and fieldcontent have</span>
<span class="comment">%    their own column(s)</span>
<span class="comment">% the layout of ND structures follows the general ML rules for ND data types</span>
<span class="comment">%    and the [-nd] option may be used</span>

<span class="comment">% an ND structure with unique fieldcontent reflecting the indices</span>

	s.siz=[2,2,3,2];
	s.fh=cprintf;
	s.ns=num2cell(s.fh.comb(s.siz));
	s.st=struct(<span class="string">'a'</span>,<span class="string">''</span>,<span class="string">'bb'</span>,<span class="string">''</span>,<span class="string">'ccc'</span>,<span class="string">''</span>);
	s.st=repmat(s.st,s.siz);
<span class="keyword">for</span>	ii=1:size(s.ns,1)
	s.txt=sprintf(<span class="string">'%d.'</span>,s.ns{ii,:});
	s.txt(end)=<span class="string">''</span>;
	s.st(s.ns{ii,:}).a=sprintf(<span class="string">'%s-A'</span>,s.txt);
	s.st(s.ns{ii,:}).bb=sprintf(<span class="string">'%s-B'</span>,s.txt);
	s.st(s.ns{ii,:}).ccc=<span class="string">'XYZ'</span>.';			<span class="comment">% a 3x1 character string</span>
<span class="keyword">end</span>
	clear <span class="string">ii</span>;

	disp(s.st);
	disp(<span class="string">'structure with indices (1,1,3,2)'</span>);
	disp(s.st(1,1,3,2));
</pre><pre class="codeoutput">4-D struct array with fields:
    a
    bb
    ccc

structure with indices (1,1,3,2)
      a: '1.1.3.2-A'
     bb: '1.1.3.2-B'
    ccc: [3x1 char]

</pre><pre class="codeinput"><span class="comment">% NOTE:	display of Mx1 character string</span>

	cprintf(s.st(1,1,3,2),<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-Lc'</span>,	{<span class="string">'fieldname'</span>,<span class="string">'value'</span>},<span class="keyword">...</span>
		<span class="string">'-dt'</span>,	<span class="string">' :  '</span>);
</pre><pre class="codeoutput">    | fieldname :      value
----------------------------
r:1 |         a :  1.1.3.2-A
r:2 |        bb :  1.1.3.2-B
r:3 |       ccc :          X
r:4 |           :          Y
r:5 |           :          Z
</pre><pre class="codeinput"><span class="comment">% NOTE:	page indices 1 and 2 display the number of structures and</span>
<span class="comment">%	NOT the number of fieldnames and columns</span>

	cprintf(s.st,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-nd'</span>,	1,<span class="keyword">...</span><span class="comment">				% show page indices</span>
		<span class="string">'-nex'</span>,	1,<span class="keyword">...</span><span class="comment">				% do not expand char strings</span>
		<span class="string">'-dt'</span>,	<span class="string">'|'</span>);				<span class="comment">% table cell separator</span>
</pre><pre class="codeoutput">     |           c:1|          c:2|          c:3|          c:4
--------------------------------------------------------------
page | (1:2,1:2,1,1)|             |             |             
r:01 |             a|    1.1.1.1-A|            a|    1.2.1.1-A
r:02 |            bb|    1.1.1.1-B|           bb|    1.2.1.1-B
r:03 |           ccc|O(2:3x1:char)|          ccc|O(2:3x1:char)
r:04 |             a|    2.1.1.1-A|            a|    2.2.1.1-A
r:05 |            bb|    2.1.1.1-B|           bb|    2.2.1.1-B
r:06 |           ccc|O(2:3x1:char)|          ccc|O(2:3x1:char)
page | (1:2,1:2,2,1)|             |             |             
r:07 |             a|    1.1.2.1-A|            a|    1.2.2.1-A
r:08 |            bb|    1.1.2.1-B|           bb|    1.2.2.1-B
r:09 |           ccc|O(2:3x1:char)|          ccc|O(2:3x1:char)
r:10 |             a|    2.1.2.1-A|            a|    2.2.2.1-A
r:11 |            bb|    2.1.2.1-B|           bb|    2.2.2.1-B
r:12 |           ccc|O(2:3x1:char)|          ccc|O(2:3x1:char)
page | (1:2,1:2,3,1)|             |             |             
r:13 |             a|    1.1.3.1-A|            a|    1.2.3.1-A
r:14 |            bb|    1.1.3.1-B|           bb|    1.2.3.1-B
r:15 |           ccc|O(2:3x1:char)|          ccc|O(2:3x1:char)
r:16 |             a|    2.1.3.1-A|            a|    2.2.3.1-A
r:17 |            bb|    2.1.3.1-B|           bb|    2.2.3.1-B
r:18 |           ccc|O(2:3x1:char)|          ccc|O(2:3x1:char)
page | (1:2,1:2,1,2)|             |             |             
r:19 |             a|    1.1.1.2-A|            a|    1.2.1.2-A
r:20 |            bb|    1.1.1.2-B|           bb|    1.2.1.2-B
r:21 |           ccc|O(2:3x1:char)|          ccc|O(2:3x1:char)
r:22 |             a|    2.1.1.2-A|            a|    2.2.1.2-A
r:23 |            bb|    2.1.1.2-B|           bb|    2.2.1.2-B
r:24 |           ccc|O(2:3x1:char)|          ccc|O(2:3x1:char)
page | (1:2,1:2,2,2)|             |             |             
r:25 |             a|    1.1.2.2-A|            a|    1.2.2.2-A
r:26 |            bb|    1.1.2.2-B|           bb|    1.2.2.2-B
r:27 |           ccc|O(2:3x1:char)|          ccc|O(2:3x1:char)
r:28 |             a|    2.1.2.2-A|            a|    2.2.2.2-A
r:29 |            bb|    2.1.2.2-B|           bb|    2.2.2.2-B
r:30 |           ccc|O(2:3x1:char)|          ccc|O(2:3x1:char)
page | (1:2,1:2,3,2)|             |             |             
r:31 |             a|    1.1.3.2-A|            a|    1.2.3.2-A
r:32 |            bb|    1.1.3.2-B|           bb|    1.2.3.2-B
r:33 |           ccc|O(2:3x1:char)|          ccc|O(2:3x1:char)
r:34 |             a|    2.1.3.2-A|            a|    2.2.3.2-A
r:35 |            bb|    2.1.3.2-B|           bb|    2.2.3.2-B
r:36 |           ccc|O(2:3x1:char)|          ccc|O(2:3x1:char)
</pre><pre class="codeinput"><span class="comment">% show content of a LINE graphics handle</span>

	s.fh=figure(<span class="string">'visible'</span>,<span class="string">'off'</span>);
	cprintf(struct(handle(line)),<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-dt'</span>,	<span class="string">' :  '</span>);
	delete(s.fh);					<span class="comment">% clean up</span>
</pre><pre class="codeoutput">     |                    c:1 :                     c:2
-------------------------------------------------------
r:01 |            DisplayName :                        
r:02 |             Annotation :  O(2:1x1:hg.Annotation)
r:03 |                  Color :         N(2:1x3:double)
r:04 |              LineStyle :                       -
r:05 |              LineWidth :                     0.5
r:06 |                 Marker :                    none
r:07 |             MarkerSize :                       6
r:08 |        MarkerEdgeColor :                    auto
r:09 |        MarkerFaceColor :                    none
r:10 |                  XData :         N(2:1x2:double)
r:11 |                  YData :         N(2:1x2:double)
r:12 |                  ZData :               E(double)
r:13 |           BeingDeleted :                     off
r:14 |          ButtonDownFcn :               E(double)
r:15 |               Children :               E(double)
r:16 |               Clipping :                      on
r:17 |              CreateFcn :               E(double)
r:18 |              DeleteFcn :               E(double)
r:19 |             BusyAction :                   queue
r:20 |       HandleVisibility :                      on
r:21 |                HitTest :                      on
r:22 |          Interruptible :                      on
r:23 |               Selected :                     off
r:24 |     SelectionHighlight :                      on
r:25 |                    Tag :                        
r:26 |                   Type :                    line
r:27 |          UIContextMenu :               E(double)
r:28 |               UserData :               E(double)
r:29 |                Visible :                      on
r:30 |                 Parent :                 171.001
</pre><h2>--- anomalous structures<a name="70"></a></h2><pre class="codeinput"><span class="comment">% anomalous structures of the form</span>

	s.san=struct(<span class="string">'a'</span>,{},<span class="string">'b'</span>,1);

<span class="comment">% are valid MATLAB constructs</span>

	s.san
	clear <span class="string">ans</span>;					<span class="comment">% clean up</span>

<span class="comment">% but yield an error if used like</span>
<span class="comment">%{
</span><span class="comment">	val=s.san.a
</span><span class="comment">??? Too many outputs requested.  Most likely cause is missing [] around
</span><span class="comment">left hand side that has a comma separated list expansion.
</span><span class="comment">%}
</span>
<span class="comment">% they are displayed with a fieldcontent of [?]</span>

	cprintf(s.san,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-Lc'</span>,	{<span class="string">'fieldname'</span>,<span class="string">'value'</span>},<span class="keyword">...</span>
		<span class="string">'-dt'</span>,	<span class="string">' :  '</span>);
</pre><pre class="codeoutput">
ans = 

0x0 struct array with fields:
    a
    b

    | fieldname :      value
----------------------------
r:1 |         a :        [?]
r:2 |         b :        [?]
</pre><h2>ND arrays and ND cell arrays of other objects<a name="71"></a></h2><pre class="codeinput"><span class="comment">% other objects are displayed according to the [-O] options</span>

<span class="keyword">if</span>	ispc
</pre><pre class="codeinput">	s.fh=figure(<span class="string">'visible'</span>,<span class="string">'off'</span>);
	s.com=actxcontrol(<span class="string">'mscal.Calendar'</span>,[20 20 300 300],s.fh);
	s.fun=@(x) x+10;

	s.O=@(x) sprintf(<span class="string">'%s(%s )'</span>,class(x),sprintf(<span class="string">' %d'</span>,size(x)));

	cprintf([s.com;s.com],<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-O'</span>,	s.O);				<span class="comment">% show class:size</span>
</pre><pre class="codeoutput">    |                       c:1
-------------------------------
r:1 | COM.mscal_Calendar( 2 1 )
</pre><pre class="codeinput">	s.com={s.com,s.fun;s.fun,s.com};

	cprintf(s.com,<span class="keyword">...</span><span class="comment">				% using the built-in other engine</span>
		<span class="string">'-mt'</span>,	1);
</pre><pre class="codeoutput">    |                         c:1                         c:2
-------------------------------------------------------------
r:1 | O(2:1x1:COM.mscal_Calendar)                 F(@(x)x+10)
r:2 |                 F(@(x)x+10) O(2:1x1:COM.mscal_Calendar)
</pre><pre class="codeinput">	cprintf(s.com,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-O'</span>,	s.O);				<span class="comment">% show class:size</span>

	delete(s.fh);
</pre><pre class="codeoutput">    |                       c:1                       c:2
---------------------------------------------------------
r:1 | COM.mscal_Calendar( 1 1 )    function_handle( 1 1 )
r:2 |    function_handle( 1 1 ) COM.mscal_Calendar( 1 1 )
</pre><pre class="codeinput"><span class="keyword">end</span>
</pre><h2>output files<a name="76"></a></h2><pre class="codeinput"><span class="comment">% results can be written or appended to ASCII files</span>
<span class="comment">% file templates can be used to insert results and replace token templates</span>
<span class="comment">%    with user defined values</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -fa		append to output file			aname	[]</span>
<span class="comment">% -fc		create output file			cname	[]</span>
<span class="comment">%		precedence: [-fa] &gt; [-fc]</span>
<span class="comment">%</span>
<span class="comment">% -fi		template file				tname	[]</span>
<span class="comment">%		may contain markers as single line</span>
<span class="comment">%		entries where the result is</span>
<span class="comment">%		inserted</span>
<span class="comment">%		for each run, only the FIRST marker</span>
<span class="comment">%		is being used</span>
<span class="comment">%		if no marker is found and the</span>
<span class="comment">%		[-fa] option is used, the result is</span>
<span class="comment">%		appended to the content of the template</span>
<span class="comment">%		file before creating the output file</span>
<span class="comment">% -fm		marker for the [-fi] option		marker	[]</span>
<span class="comment">%		must be a 1xN character string</span>
<span class="comment">% -fr		cell of token/value pairs		{t,v...}</span>
<span class="comment">%		must be 1xN character strings</span>
<span class="comment">%		all tokens are replaced with their</span>
<span class="comment">%		values in a [-fi] template file</span>
<span class="comment">%		before insertion of the result</span>

<span class="comment">% NOTE:	output files contain the exact result including</span>
<span class="comment">%	TAB characters</span>
<span class="comment">%	markers and tokens are replaced using the</span>
<span class="comment">%	regular expression engine</span>
<span class="comment">%	therefor, if special characters are used,</span>
<span class="comment">%	they must be marked as literal by \char</span>
<span class="comment">%</span>
<span class="comment">% the accompanying file CPTMPL.TXT is used for demonstration</span>
<span class="comment">% a file CP_00X.00X is created during the demonstration and</span>
<span class="comment">% removed afterwards</span>

	s.ftmpl=<span class="string">'cptmpl.txt'</span>;
	s.fout=<span class="string">'cp_00X.00X'</span>;

	type(s.ftmpl);
</pre><pre class="codeoutput">
a test FO for CPRINTF file routines
FO   : cptmpl.txt
created: &lt;DATE&gt;
-----------------------------------
% output $1
$MARK$
% output $2
$MARK$
</pre><h2>--- creating output files<a name="77"></a></h2><pre class="codeinput"><span class="comment">% using a return argument prevents the result from being displayed after</span>
<span class="comment">%    runtime</span>
<span class="comment">% a print message is always printed to confirm the writing process</span>

	s.p=cprintf(s.m,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-fc'</span>,	s.fout);
	type(s.fout);
</pre><pre class="codeoutput">CP|   create  :        200 b cp_00X.00X
 

    |        c:1        c:2        c:3
--------------------------------------
r:1 |    1          2          3   +3i
r:2 |  NaN -4.2i  NaN        Inf      
r:3 | -Inf        NaN +Infi  Inf +5.5i

</pre><h2>--- appending to files<a name="78"></a></h2><pre class="codeinput">	s.p=cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-fa'</span>,	s.fout,<span class="keyword">...</span>
		<span class="string">'-dt'</span>,	<span class="string">'|'</span>);
	type(s.fout);
	delete(s.fout);
</pre><pre class="codeoutput">CP|   append  :        186 b cp_00X.00X
 

    |        c:1        c:2        c:3
--------------------------------------
r:1 |    1          2          3   +3i
r:2 |  NaN -4.2i  NaN        Inf      
r:3 | -Inf        NaN +Infi  Inf +5.5i
    | c:1|c:2|c:3|c:4|c:5|c:6
-----------------------------
r:1 |   1|  5|  9| 13| 17| 21
r:2 |   2|  6| 10| 14| 18| 22
r:3 |   3|  7| 11| 15| 19| 23
r:4 |   4|  8| 12| 16| 20| 24

</pre><h2>--- using a template file<a name="79"></a></h2><pre class="codeinput">	type(s.ftmpl);
	s.p=cprintf(s.m,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-fc'</span>,	s.fout,<span class="keyword">...</span>
		<span class="string">'-fi'</span>,	s.ftmpl,<span class="keyword">...</span>
		<span class="string">'-fm'</span>,	<span class="string">'\$MARK\$'</span>);			<span class="comment">% note liteal \$</span>

<span class="comment">% NOTE:	only marker #1 is replaced</span>

	type(s.fout);
</pre><pre class="codeoutput">
a test FO for CPRINTF file routines
FO   : cptmpl.txt
created: &lt;DATE&gt;
-----------------------------------
% output $1
$MARK$
% output $2
$MARK$
CP| template  :              cptmpl.txt
CP|   create  :        480 b cp_00X.00X
 

a test FO for CPRINTF file routines   
FO   : cptmpl.txt                     
created: &lt;DATE&gt;                       
-----------------------------------   
% output $1                           
    |        c:1        c:2        c:3
--------------------------------------
r:1 |    1          2          3   +3i
r:2 |  NaN -4.2i  NaN        Inf      
r:3 | -Inf        NaN +Infi  Inf +5.5i
% output $2                           
$MARK$                                

</pre><pre class="codeinput"><span class="comment">% to replace other markers, the newly created FOUT must be used</span>

	s.p=cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-dt'</span>,	<span class="string">'|'</span>,<span class="keyword">...</span>
		<span class="string">'-fc'</span>,	s.fout,<span class="keyword">...</span>
		<span class="string">'-fi'</span>,	s.fout,<span class="keyword">...</span>
		<span class="string">'-fm'</span>,	<span class="string">'\$MARK\$'</span>);
	type(s.fout);
	delete(s.fout);
</pre><pre class="codeoutput">CP| template  :              cp_00X.00X
CP|   create  :        680 b cp_00X.00X
 

a test FO for CPRINTF file routines   
FO   : cptmpl.txt                     
created: &lt;DATE&gt;                       
-----------------------------------   
% output $1                           
    |        c:1        c:2        c:3
--------------------------------------
r:1 |    1          2          3   +3i
r:2 |  NaN -4.2i  NaN        Inf      
r:3 | -Inf        NaN +Infi  Inf +5.5i
% output $2                           
    | c:1|c:2|c:3|c:4|c:5|c:6         
-----------------------------         
r:1 |   1|  5|  9| 13| 17| 21         
r:2 |   2|  6| 10| 14| 18| 22         
r:3 |   3|  7| 11| 15| 19| 23         
r:4 |   4|  8| 12| 16| 20| 24         

</pre><h2>--- replacing tokens in template files<a name="81"></a></h2><pre class="codeinput">	s.tok={
		<span class="string">'FO'</span>,		<span class="string">'file'</span>
		<span class="string">'&lt;DATE&gt;'</span>,	datestr(clock)
		<span class="string">'output \$'</span>,	<span class="string">'result #'</span>
	};
	s.p=cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-dt'</span>,	<span class="string">'|'</span>,<span class="keyword">...</span>
		<span class="string">'-fc'</span>,	s.fout,<span class="keyword">...</span>
		<span class="string">'-fi'</span>,	s.ftmpl,<span class="keyword">...</span>
		<span class="string">'-fr'</span>,	s.tok,<span class="keyword">...</span>
		<span class="string">'-fm'</span>,	<span class="string">'\$MARK\$'</span>);
	s.p=cprintf(s.m,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-dt'</span>,	<span class="string">'|'</span>,<span class="keyword">...</span>
		<span class="string">'-fa'</span>,	s.fout,<span class="keyword">...</span>
		<span class="string">'-fi'</span>,	s.fout,<span class="keyword">...</span>
		<span class="string">'-fr'</span>,	s.tok,<span class="keyword">...</span>
		<span class="string">'-fm'</span>,	<span class="string">'\$MARK\$'</span>);

<span class="comment">% NOTE:	no marker exists in S.FOUT during the second call</span>
<span class="comment">%	the result is appended       with the [-fa] option</span>
<span class="comment">%	whereas an error would occur with the [-fc] option</span>

	type(s.fout);
	delete(s.fout);
</pre><pre class="codeoutput">CP| template  :              cptmpl.txt
CP|   create  :        507 b cp_00X.00X
 
CP| template  :              cp_00X.00X
CP|   create  :        680 b cp_00X.00X
 

a test file for CPRINTF file routines 
file   : cptmpl.txt                   
created: 11-Jun-2009 08:59:04         
-----------------------------------   
% result #1                           
    | c:1|c:2|c:3|c:4|c:5|c:6         
-----------------------------         
r:1 |   1|  5|  9| 13| 17| 21         
r:2 |   2|  6| 10| 14| 18| 22         
r:3 |   3|  7| 11| 15| 19| 23         
r:4 |   4|  8| 12| 16| 20| 24         
% result #2                           
    |        c:1|       c:2|       c:3
--------------------------------------
r:1 |    1      |   2      |   3   +3i
r:2 |  NaN -4.2i| NaN      | Inf      
r:3 | -Inf      | NaN +Infi| Inf +5.5i

</pre><h2>option processing<a name="82"></a></h2>
         <h2>--- option precedence<a name="83"></a></h2><pre class="codeinput"><span class="comment">% options are resolved in this order of precedence from lowest to highest</span>
<span class="comment">%</span>
<span class="comment">%	1) getpref					low</span>
<span class="comment">%	2) option file</span>
<span class="comment">%	3) option structure</span>
<span class="comment">%	4) command line					high</span>
<span class="comment">%</span>
<span class="comment">% NOTE:	if multiple options are set, the LAST values is used</span>
</pre><h2>--- option preferences across MATLAB sessions<a name="84"></a></h2><pre class="codeinput"><span class="comment">% user may define preferred options, which are kept across MATLAB sessions, by</span>
<span class="comment">%</span>
<span class="comment">%	setpref('cprintf','opt',{'OPT1',VAL1,...,'OPTn',VALn});</span>

<span class="comment">% setting [-mt] options by default</span>

	s.opref=getpref(<span class="string">'cprintf'</span>);			<span class="comment">% save old state</span>
	setpref(<span class="string">'cprintf'</span>,<span class="string">'opt'</span>,{<span class="string">'-mt'</span>,1});

	cprintf(s.r);
</pre><pre class="codeoutput">    | c:1 c:2 c:3 c:4 c:5 c:6
-----------------------------
r:1 |   1   5   9  13  17  21
r:2 |   2   6  10  14  18  22
r:3 |   3   7  11  15  19  23
r:4 |   4   8  12  16  20  24
</pre><pre class="codeinput"><span class="comment">% modification of preferred options</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -p		do NOT use preferred options		[F]</span>

<span class="comment">% NOTE:	[-p] requires NO value</span>

	cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-p'</span>,<span class="keyword">...</span><span class="comment">				% do NOT use preferred options</span>
		<span class="string">'-d'</span>,	<span class="string">' | '</span>);
</pre><pre class="codeoutput"> 1 |  5 |  9 | 13 | 17 | 21
 2 |  6 | 10 | 14 | 18 | 22
 3 |  7 | 11 | 15 | 19 | 23
 4 |  8 | 12 | 16 | 20 | 24
</pre><pre class="codeinput"><span class="comment">% in addition, any runtime option will override a preferred option</span>

	cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	0,<span class="keyword">...</span><span class="comment">				% override preferred [-mt]</span>
		<span class="string">'-d'</span>,	<span class="string">' | '</span>);

<span class="keyword">if</span>	~isempty(s.opref)
	setpref(<span class="string">'cprintf'</span>,<span class="string">'opt'</span>,s.opref.opt);		<span class="comment">% reset</span>
<span class="keyword">else</span>
	rmpref(<span class="string">'cprintf'</span>);				<span class="comment">% clean up</span>
<span class="keyword">end</span>
</pre><pre class="codeoutput"> 1 |  5 |  9 | 13 | 17 | 21
 2 |  6 | 10 | 14 | 18 | 22
 3 |  7 | 11 | 15 | 19 | 23
 4 |  8 | 12 | 16 | 20 | 24
</pre><h2>--- reading and writing option files<a name="87"></a></h2><pre class="codeinput"><span class="comment">% options can be retrieved from any user created ASCII file</span>
<span class="comment">% there are two possible file formats:</span>
<span class="comment">% 1)		user created files, which contain a sequence of option/value pairs</span>
<span class="comment">%		as if typed on the command line</span>
<span class="comment">%		if it is an m-file, the extension is not necessary, otherwise, it</span>
<span class="comment">%		must be added to identify the file</span>
<span class="comment">% 2)		files generated by CPRINTF, which contain a sequence of commands</span>
<span class="comment">%		that create an option structure</span>
<span class="comment">%		these files are m-files with a short help header,</span>
<span class="comment">%		which may be used as stand-alones as well to</span>
<span class="comment">%		retrieve the option structure</span>
<span class="comment">%</span>
<span class="comment">% read and create option files</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -ini		read options from file			iname	[]</span>
<span class="comment">%		format: user created or CPRINTF</span>
<span class="comment">% -sav		save options to   file			sname	[]</span>
<span class="comment">%		which are created from a [-ini] file</span>
<span class="comment">%		if this option is not used, a temporary</span>
<span class="comment">%		ASCII file is created in the current</span>
<span class="comment">%		folder and discarded immediately after</span>
<span class="comment">%		loading</span>
<span class="comment">%</span>
<span class="comment">%		see also -macros- below for possibilities</span>
<span class="comment">%		to read/create option files without running</span>
<span class="comment">%		CPRINTF</span>
<span class="comment">%</span>
<span class="comment">% NOTE:	if the [-ini] option is used without</span>
<span class="comment">%	the [-sav] option, a temporary files is</span>
<span class="comment">%	created and removed right after options</span>
<span class="comment">%	are read if the [-ini] and [-sav] use</span>
<span class="comment">%	the same file name, a new copy of the</span>
<span class="comment">%	file is saved without warning</span>
<span class="comment">%	only command line options are saved</span>
</pre><pre class="codeinput"><span class="comment">% user created ASCII files</span>
<span class="comment">% - option/values must be written as if typed at the command line, eg,</span>
<span class="comment">%		'-mt',1,'-Lc',{1,2,'a'}</span>
<span class="comment">% - the parsing/decoding of these files starts at the first occurrence of</span>
<span class="comment">%   an option</span>
<span class="comment">% - option names must be convertible to valid structure fieldnames</span>
<span class="comment">% - values may contain any regular, valid ML expression and must be</span>
<span class="comment">%   separated by at least one &lt;,&gt; from the option</span>
<span class="comment">% - comments may be used according the ML's common rules</span>
<span class="comment">% - white spaces, &lt;;&gt;, and multiple &lt;,&gt;s are discarded</span>
<span class="comment">% - newlines are discarded</span>

<span class="comment">% CPINI.TXT is an exemplary [-ini] file showing some syntax possibilities,</span>
<span class="comment">% which typically are less disorganized and chaotic</span>
<span class="comment">% - parsing starts at '-begin'</span>
<span class="comment">% - note several ML type comments starting with a &lt;%&gt;</span>
<span class="comment">% - non-CPRINTF options may be used; they are created but discarded at runtime</span>
<span class="comment">% - any valid ML command in between option/value pairs will be created during</span>
<span class="comment">%   runtime and results may be displayed in the command window if it is not</span>
<span class="comment">%   suppressed by a &lt;;&gt;</span>

	s.fini=<span class="string">'cpini.txt'</span>;
	s.fout=sprintf(<span class="string">'cpini_%s'</span>,num2hex(rand(1,2)));	<span class="comment">% a unique file name</span>
							<span class="comment">% extension not required</span>

	type(s.fini);
</pre><pre class="codeoutput">
CPINIT.TXT	a cprintf ini file example
created:
	us	10-Jan-2008 us@neurol.unizh.ch
modified:
	us	11-Jun-2009 08:58:55
localid:	us@USZ|ws-nos-36362|x86|Windows XP|7.7.0.471.R2008b
--------------------------------------------------------------------------------
,,	,	;
note nonsense options FOO_xx
decoding starts after FIRST occurrence of a typical option pair:
'-begin','start of options'; % an option comment
'-FOO_x1',{
		1 2 3	% a cell comment
		3 2 1
	};
% a line comment
'-mt',1,'-nd',pi
'-Lcs','=',
'-Lr'	,	,	,  ,	  ,num2cell(--5:-10*-1);
,,,'-Lc'	,	{'X','Y'}.'
'-FOO_x2',{{'abc',1,'12'},'foo',--12:--23}

'-FOO_x3',rand(2,2,3)
'-FOO_x4',,,,'-FOO_x5','-E',@(x) sprintf('%s',class(x));;'-t','+';,;,,;
'-FOO_x6'={
1 2 3
3 2 1
};'-FOO_x7',{1,2,3;4,5,6};,,'-FOO_x8','-',;;		
'-tab',10,,,'-f','-',,,,,
'-FOO_x8','foo'	;	,;
</pre><pre class="codeinput"><span class="comment">% load CPINI.TXT during runtime and save it as a CPRINTF option file</span>

<span class="comment">% NOTE:	correct formatting of table elements according to options</span>

	cprintf(bitand(s.r,1)~=0,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-ini'</span>,	s.fini,<span class="keyword">...</span>
		<span class="string">'-sav'</span>,	s.fout);
</pre><pre class="codeoutput">CP| file      :              F:\usr\matlab\tmp\fex\acprint\cpini.txt
CP| create    :              cpini_33ffee8977f214d71100324575201d4a
CP| options   :         18   unique/user defined
 
    | X Y X Y X Y
=================
r:5 | + + + + + +
r:6 | - - - - - -
r:7 | + + + + + +
r:8 | - - - - - -
</pre><pre class="codeinput"><span class="comment">% output and standalone use of CPRINTF created m-file</span>

<span class="comment">% NOTE:	correct formatting of multiline commands</span>
<span class="comment">%	positioning of comments</span>
<span class="comment">%	the option structure contains all option/value pairs</span>

	disp(<span class="string">'***** FILE CONTENT'</span>);
	type(s.fout);
</pre><pre class="codeoutput">***** FILE CONTENT

%CPRINTF	option file cpini_33ffee8977f214d71100324575201d4a.m
%version	11-Jun-2009 08:58:55
%created	11-Jun-2009 08:59:04
%options	18 unique/user defined
%
%SYNTAX		opt = cpini_33ffee8977f214d71100324575201d4a.m;
%--------------------------------------------------------------------
function	o = cpini_33ffee8977f214d71100324575201d4a(varargin)

%%%	section ----------- CPRINTF ---------- user data
	o. magic = 'CPRINTF';
	o.   ver = '11-Jun-2009 08:58:55';
	o. MLver = '7.8.0.347 (R2009a)';
	o. begin = 'start of options';% an option comment;
	o.FOO_x1 = {
		1 2 3	% a cell comment
		3 2 1
	};% a line comment;
	o.    mt = 1;
	o.    nd = pi;
	o.   Lcs = '=';
	o.    Lr = num2cell(--5:-10*-1);
	o.    Lc = {'X','Y'}.';
	o.FOO_x2 = {{'abc',1,'12'},'foo',--12:--23};
	o.FOO_x3 = rand(2,2,3);
	o.FOO_x4 = [];
	o.FOO_x5 = [];
	o.     E = @(x) sprintf('%s',class(x));
	o.     t = '+';
	o.FOO_x6 = {
1 2 3
3 2 1
};
	o.FOO_x7 = {1,2,3;4,5,6};
	o.FOO_x8 = '-';
	o.   tab = 10;
	o.     f = '-';
	o.FOO_x8 = 'foo';
%%%	section ----------- CPRINTF ---------- user data
end

</pre><pre class="codeinput">	disp(<span class="string">'***** HELP SECTION'</span>);
	help(s.fout);
</pre><pre class="codeoutput">***** HELP SECTION
 CPRINTF	option file cpini_33ffee8977f214d71100324575201d4a.m
 version	11-Jun-2009 08:58:55
 created	11-Jun-2009 08:59:04
 options	18 unique/user defined
 
 SYNTAX		opt = cpini_33ffee8977f214d71100324575201d4a.m;
 --------------------------------------------------------------------

</pre><pre class="codeinput">	disp(<span class="string">'***** OPTION STRUCTURE'</span>);
	s.val=feval(s.fout);				<span class="comment">% typically: s.val=foo;</span>
	disp(s.val);
</pre><pre class="codeoutput">***** OPTION STRUCTURE
     magic: 'CPRINTF'
       ver: '11-Jun-2009 08:58:55'
     MLver: '7.8.0.347 (R2009a)'
     begin: 'start of options'
    FOO_x1: {2x3 cell}
        mt: 1
        nd: 3.1416
       Lcs: '='
        Lr: {[5]  [6]  [7]  [8]  [9]  [10]}
        Lc: {2x1 cell}
    FOO_x2: {{1x3 cell}  'foo'  [12 13 14 15 16 17 18 19 20 21 22 23]}
    FOO_x3: [2x2x3 double]
    FOO_x4: []
    FOO_x5: []
         E: @(x)sprintf('%s',class(x))
         t: '+'
    FOO_x6: {2x3 cell}
    FOO_x7: {2x3 cell}
    FOO_x8: 'foo'
       tab: 10
         f: '-'

</pre><h2>--- option structures<a name="93"></a></h2><pre class="codeinput"><span class="comment">% a predefined option structure may be used to easily enter options</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -opt		an option structure			os	[]</span>

<span class="comment">% NOTE:	an option structure consists of</span>
<span class="comment">%</span>
<span class="comment">%		s.option = value</span>
<span class="comment">%</span>
<span class="comment">%	where option is a valid CPRINTF option</span>
<span class="comment">%	without the [-] and a valid value</span>
<span class="comment">%	unused options are discarded</span>
<span class="comment">%	CPRINTF created [-ini] files produce option structures</span>

	s.sopt.a=<span class="string">'a'</span>;					<span class="comment">% currently not an option</span>
	s.sopt.Lc={1,<span class="string">'XYZ'</span>,2};
	s.sopt.Lcs=<span class="string">'='</span>;
	s.sopt.Lr=s.rlab;

	cprintf(s.r,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-opt'</span>,	s.sopt);
</pre><pre class="codeoutput">       | c:1 XYZ c:2 c:1 XYZ c:2
================================
 sweet |   1   5   9  13  17  21
  sour |   2   6  10  14  18  22
 salty |   3   7  11  15  19  23
bitter |   4   8  12  16  20  24
</pre><pre class="codeinput"><span class="comment">% using a CPRINTF created ini file, which returns an option structure</span>

	cprintf(s.r&gt;12,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-opt'</span>,	feval(s.fout));			<span class="comment">% typically: '-opt','foo'</span>

	delete([s.fout,<span class="string">'.m'</span>]);				<span class="comment">% to clean up we need the extension</span>
</pre><pre class="codeoutput">    | X Y X Y X Y
=================
r:5 | - - - + + +
r:6 | - - - + + +
r:7 | - - - + + +
r:8 | - - - + + +
</pre><h2>engine options<a name="95"></a></h2>
         <h2>--- TAB size and TAB replacement in CELLs<a name="96"></a></h2><pre class="codeinput"><span class="comment">% conversion of TAB [\t] characters to SPACES for format specs</span>
<span class="comment">%    OTHER than the CELL separator [-d]</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -tab		number of SPACES/TAB			n	[8]</span>
<span class="comment">% -ntab		do NOT replace TABs in CELLs		T|F	[F]</span>

<span class="comment">% compare with output above</span>

	cprintf(s.m,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-Ct'</span>,	<span class="string">'{%s\t}'</span>,<span class="keyword">...</span>
		<span class="string">'-tab'</span>,	2);
</pre><pre class="codeoutput">    |            c:1            c:2            c:3
--------------------------------------------------
r:1 | {   1        } {   2        } {   3   +3i  }
r:2 | { NaN -4.2i  } { NaN        } { Inf        }
r:3 | {-Inf        } { NaN +Infi  } { Inf +5.5i  }
</pre><pre class="codeinput"><span class="comment">% NOTE:	replacement of CELL TABS with TAB size SPACES in the output</span>

	s.stab={sprintf(<span class="string">'a\t\t\ttab'</span>),sprintf(<span class="string">'b\t\ttab'</span>),<span class="string">'c d'</span>;100,200,300};
	cprintf(s.stab,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1);
</pre><pre class="codeoutput">    |                          c:1                          c:2                          c:3
--------------------------------------------------------------------------------------------
r:1 | a                        tab         b                tab                          c d
r:2 |                          100                          200                          300
</pre><pre class="codeinput"><span class="comment">% NOTE:	with the [-ntab] option, table colums have an additional length</span>
<span class="comment">%	of one char &lt;\t&gt; per TAB and the TABs are kept in the output</span>
<span class="comment">%	this may be required in other applications</span>

	s.res=cprintf(s.stab,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-ntab'</span>,1);

	s.rres=strrep(cellstr(s.res),sprintf(<span class="string">'\t'</span>),<span class="string">'.'</span>);
	disp(sprintf(<span class="string">'\noriginal output\n'</span>));
	disp(s.res);
	disp(sprintf(<span class="string">'\noriginal output with later TAB replacements\n'</span>));
	disp(char(s.rres));
</pre><pre class="codeoutput">
original output

    |     c:1     c:2     c:3
-----------------------------
r:1 | a			tab  b		tab     c d
r:2 |     100     200     300

original output with later TAB replacements

    |     c:1     c:2     c:3
-----------------------------
r:1 | a...tab  b..tab     c d
r:2 |     100     200     300
</pre><h2>--- runtime printout<a name="99"></a></h2><pre class="codeinput"><span class="comment">% runtime processing and timing of conversion stages can be print out</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -db		show processing of conversions		T|F	[F]</span>
<span class="comment">% -q		quiet mode				T|F	[F]</span>
<span class="comment">%		except for [-db] output ALL</span>
<span class="comment">%		runtime processing for</span>
<span class="comment">%		[-fc]/[-fa]/[-ini] options</span>
<span class="comment">%		as well as the display of the result</span>
<span class="comment">%		is suppressed even if the command</span>
<span class="comment">%		does NOT end with a &lt;;&gt;</span>

	cprintf(s.m,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-db'</span>,	1);

<span class="comment">% explanation of runtime output</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% - numeric col 1:	 # of cells remaining</span>
<span class="comment">%			-# of cells converted</span>
<span class="comment">%			if the array contains complex numbers, the -# will</span>
<span class="comment">%			   be larger than the #</span>
<span class="comment">% - numeric col 2:	time [sec] used to convert</span>

<span class="comment">% NOTE:	after formatting, 0 c should be left to convert</span>
</pre><pre class="codeoutput">CP| --------- :
CP| format    :                     9 c
CP| type      :      empty =        9 c
CP| type      :      empty = -      0 c 0.000000 sec
CP| type      :    logical =        9 c
CP| type      :    logical = -      0 c 0.000000 sec
CP| type      :    numeric =        9 c
CP| type      :    numeric = -     13 c 0.000000 sec
CP| format    :       done =        0 c 0.000000 sec
CP| print     :                    25 c
CP| print     :       done =            0.000000 sec
CP| --------- :       done =            0.000000 sec
----------------------------------------------------
    |        c:1        c:2        c:3
--------------------------------------
r:1 |    1          2          3   +3i
r:2 |  NaN -4.2i  NaN        Inf      
r:3 | -Inf        NaN +Infi  Inf +5.5i
</pre><h2>output<a name="100"></a></h2>
         <h2>--- macros<a name="101"></a></h2><pre class="codeinput"><span class="comment">% several macros (function handles) are available if the engine structure</span>
<span class="comment">%    is retrieved, which may be helpful to prepare and/or organize often</span>
<span class="comment">%    used options</span>
<span class="comment">% if no output argument is selected, macros do NOT return the default</span>
<span class="comment">%    ANS</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% .getpar	to create an option structure from</span>
<span class="comment">%		command line parameters</span>
<span class="comment">% .setpar	to create a CPRINTF options only</span>
<span class="comment">%		option structure from a user defined</span>
<span class="comment">%		option structure</span>
<span class="comment">% .ini		to read/create ini files</span>
<span class="comment">% .write	to write an output file</span>
<span class="comment">% .other	to test the [-O] display engine, which</span>
<span class="comment">%		must produce an output for any data</span>
<span class="comment">%		type and array size</span>
<span class="comment">% .comb		to create a page index sequence</span>

<span class="comment">% macros can be retrieved by a simple call to CPRINTF without arguments,</span>
<span class="comment">%    returns a structure with the engine parameters; see also -arguments-</span>

	s.mac=cprintf;
</pre><pre class="codeinput"><span class="comment">% GETPAR	OS = P.getpar(OPT1,VAL1,...,OPTn,VALn)</span>

<span class="comment">% NOTE:	options currently not used by CPRINTF are discarded</span>
<span class="comment">%	values, which would not be active during runtime</span>
<span class="comment">%	are discarded as well, eg, [-nd]</span>

	s.opt=s.mac.getpar(<span class="string">'-foo'</span>,<span class="string">'goo'</span>,<span class="string">'-Lc'</span>,{<span class="string">'a'</span>,1,<span class="string">'b'</span>},<span class="string">'-mt'</span>,0,<span class="string">'-nd'</span>,[]);
	disp(s.opt);
</pre><pre class="codeoutput">    Lc: {'a'  [1]  'b'}
    mt: 0

</pre><pre class="codeinput"><span class="comment">% SETPAR	OS = P.setpar(OS)</span>

<span class="comment">% NOTE:	same as GETPAR</span>
<span class="comment">%	the input may be a CPRINTF created [-sav] file</span>

<span class="comment">%	s.opt=s.mac.setpar('CPRINTF_savfile');</span>
	s.opt=s.mac.setpar(s.val);				<span class="comment">% [-ini] created option structure</span>
	disp(s.opt);
</pre><pre class="codeoutput">      E: @(x)sprintf('%s',class(x))
     Lc: {2x1 cell}
    Lcs: '='
     Lr: {[5]  [6]  [7]  [8]  [9]  [10]}
      f: '-'
     mt: 1
     nd: 3.1416
      t: '+'
    tab: 10

</pre><pre class="codeinput"><span class="comment">% INI		OS = P.ini(INIFILE,[SAVFILE],['-q',1,...,OPTn,VALn]);</span>

<span class="comment">% NOTE:	see section -option files- for rules regarding the creation of output files</span>
<span class="comment">%	to add options, SAVFILE must be set</span>
<span class="comment">%	to create a temporary file, SAVFILE can be set to ''</span>

	s.opt=s.mac.ini(s.fini);
	disp(s.opt);
</pre><pre class="codeoutput">CP| file      :              F:\usr\matlab\tmp\fex\acprint\cpini.txt
CP| create    :              temporary file removed
CP| options   :         18   unique/user defined
 
     magic: 'CPRINTF'
       ver: '11-Jun-2009 08:58:55'
     MLver: '7.8.0.347 (R2009a)'
     begin: 'start of options'
    FOO_x1: {2x3 cell}
        mt: 1
        nd: 3.1416
       Lcs: '='
        Lr: {[5]  [6]  [7]  [8]  [9]  [10]}
        Lc: {2x1 cell}
    FOO_x2: {{1x3 cell}  'foo'  [12 13 14 15 16 17 18 19 20 21 22 23]}
    FOO_x3: [2x2x3 double]
    FOO_x4: []
    FOO_x5: []
         E: @(x)sprintf('%s',class(x))
         t: '+'
    FOO_x6: {2x3 cell}
    FOO_x7: {2x3 cell}
    FOO_x8: 'foo'
       tab: 10
         f: '-'

</pre><pre class="codeinput"><span class="comment">% WRITE		[ARG,...] = P.write(A,OPT1,VAL1,...,OPTn,VALn)</span>

<span class="comment">% NOTE:	mimicks the command</span>
<span class="comment">%</span>
<span class="comment">%		[arg,...] = cprintf(A,WOPT,WVAL,OPT1,VAL1,...,OPTn,VALn)</span>
<span class="comment">%</span>
<span class="comment">%	one of the WOPTs must be a [-fc]/[-fa] file creation command</span>
<span class="comment">%	the [-q] silent processing flag is turned on [T] by default</span>
<span class="comment">%	the [-mt] table option is turned off [F] by default and</span>
<span class="comment">%	must be set if this feature is required</span>

	s.fwrite=<span class="string">'CP_00X.00X'</span>;
	s.mac.write(s.r,<span class="string">'-fc'</span>,s.fwrite);
	type(s.fwrite);
	delete(s.fwrite);				<span class="comment">% clean up</span>
</pre><pre class="codeoutput">
 1  5  9 13 17 21
 2  6 10 14 18 22
 3  7 11 15 19 23
 4  8 12 16 20 24

</pre><pre class="codeinput"><span class="comment">% OTHER		OVAL = P.other(O1,...,On)</span>

	s.oval={pi,magic(3)+1i,cell(2,2),sparse(2,2,3+1i),@(x) x+10};
	s.oval=s.mac.other(s.oval{:});
	disp(s.oval);
</pre><pre class="codeoutput">    'N(2:1x1:double)'
    'N(2:3x3:double.c)'
    'C(2:2x2)'
    'N(2:2x2:double.s.c)'
    'F(@(x)x+10)'

</pre><pre class="codeinput"><span class="comment">% COMB		PIX = P.comb(ARRAYSIZE)</span>

	s.pix=s.mac.comb(size(rand([2,2,1,2])));
	disp(s.pix);
</pre><pre class="codeoutput">     1     1     1     1
     2     1     1     1
     1     2     1     1
     2     2     1     1
     1     1     1     2
     2     1     1     2
     1     2     1     2
     2     2     1     2

</pre><h2>--- arguments<a name="108"></a></h2><pre class="codeinput"><span class="comment">% the engine structure is returned by a call to CPRINTF without input arguments</span>
<span class="comment">% this may be useful to access several CPRINTF functions</span>
<span class="comment">%</span>
	s.p=cprintf;

<span class="comment">%	s.p.other()	check other display output</span>

<span class="comment">% several outputs are available to import the result into other programs,</span>
<span class="comment">%    in particular, spreadsheets, which take cell input, eg,</span>
<span class="comment">%    XLSWRITE (see OUTPUT section)</span>
<span class="comment">% all output can be collected into a single structure</span>
<span class="comment">%-------------------------------------------------------------------------------</span>
<span class="comment">% -so		collect output				T|F	[F]</span>

<span class="comment">% NOTE:	the result is NOT displayed during runtime because of</span>
<span class="comment">%	1) output arguments and 2) the semicolon at the end</span>

	[s.rs,s.rc,s.mc,s.par]=cprintf(s.m,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1);

<span class="comment">% the result</span>

	disp(s.rs);
</pre><pre class="codeoutput">    |        c:1        c:2        c:3
--------------------------------------
r:1 |    1          2          3   +3i
r:2 |  NaN -4.2i  NaN        Inf      
r:3 | -Inf        NaN +Infi  Inf +5.5i
</pre><pre class="codeinput"><span class="comment">% the output prior to conversion</span>

	disp(s.mc);
</pre><pre class="codeoutput">    [                1]    [          2]    [  3 +          3i]
    [NaN -        4.2i]    [        NaN]    [              Inf]
    [             -Inf]    [NaN +  Infi]    [Inf +        5.5i]

</pre><pre class="codeinput"><span class="comment">% the output in a cell array with formatted CELLs</span>

	disp(s.rc);
</pre><pre class="codeoutput">    ' '      '|'    'c:1'           'c:2'           'c:3'       
    '-'      '-'    '-'             '-'             '-'         
    'r:1'    '|'    '   1      '    '   2      '    '   3   +3i'
    'r:2'    '|'    ' NaN -4.2i'    ' NaN      '    ' Inf      '
    'r:3'    '|'    '-Inf      '    ' NaN +Infi'    ' Inf +5.5i'

</pre><pre class="codeinput"><span class="comment">% all output collected in a structure</span>

	s.p=cprintf(s.m,<span class="keyword">...</span>
		<span class="string">'-mt'</span>,	1,<span class="keyword">...</span>
		<span class="string">'-so'</span>,	1);

<span class="comment">% show engine parameters, input, and output</span>

	disp(s.p);
</pre><pre class="codeoutput">         magic: 'CPRINTF'
           ver: '11-Jun-2009 08:58:55'
         MLver: '7.8.0.347 (R2009a)'
    section_10: '---------- INPUT   ------------'
           arg: [3x3 double]
         class: 'double'
     isnumeric: 1
    section_20: '---------- OPTIONS ------------'
          otbl: {53x2 cell}
       hasotbl: [53x1 logical]
           opt: [1x1 struct]
        hasopt: [1x1 struct]
         islog: {17x1 cell}
    section_30: '---------- ENGINE  ------------'
          fpar: {6x6 cell}
          ctbl: {5x5 cell}
           ndc: 2
           nsc: [3 3]
           nnc: 9
            pr: 5
            pc: 5
            in: [25x1 logical]
         sconv: 13
          type: [1x1 struct]
         istbl: 1
        hastbl: [2 2]
        tlabel: [-1 -2 -1 -2]
         tbody: [3 5 3 5]
          sepr: {3x1 cell}
          sepc: {'-'  '-'  '-'  '-'  '-'}
           fmt: '%3.3s %1.1s %10.10s %10.10s %10.10s'
          fmts: [3 1 10 10 10]
          dels: 1
         delst: 1
          tabc: '	'
          tabs: '        '
          nmod: 1
    section_31: '---------- macros   -----------'
        getpar: @(varargin)CPRINTF_parse_option(0,varargin{:})
        setpar: @(varargin)CPRINTF_struct2opt(0,varargin{:})
           ini: @(varargin)CPRINTF_ini2opt(0,varargin{:})
         write: @(varargin)CPRINTF_ascii2file(varargin{:})
         other: @CPRINTF_other
          comb: @(varargin)CPRINTF_comb([varargin{:}])
          disp: @CPRINTF_nodisp
           s2f: @str2func
    section_40: '---------- OUTPUT  ------------'
          text: [5x38 char]
          cell: {5x5 cell}
          carg: {3x3 cell}

</pre><pre class="codeinput"><span class="comment">% same as RC above</span>

	disp(s.p.cell);
</pre><pre class="codeoutput">    ' '      '|'    'c:1'           'c:2'           'c:3'       
    '-'      '-'    '-'             '-'             '-'         
    'r:1'    '|'    '   1      '    '   2      '    '   3   +3i'
    'r:2'    '|'    ' NaN -4.2i'    ' NaN      '    ' Inf      '
    'r:3'    '|'    '-Inf      '    ' NaN +Infi'    ' Inf +5.5i'

</pre><h2>--- input to xlswrite<a name="113"></a></h2><pre class="codeinput"><span class="comment">% use RC as input to xlswrite</span>
<span class="comment">%{
</span><span class="comment">	s.rc=strtrim(s.rc);	% if leading/trailing spaces need to be removed
</span><span class="comment">	s.fnam='foo.xls';
</span><span class="comment">	xlswrite(s.fnam,s.rc);
</span><span class="comment">	winopen(s.fnam);
</span><span class="comment">%}</span>
</pre><p class="footer"><br>
            Published with MATLAB&reg; 7.8<br></p>
      </div>
      <!--
##### SOURCE BEGIN #####
%% introduction

% CPRINTF	us 11-Jun-2009 08:58:55 / us@neurol.unizh.ch
%
%		- converts an ND array of any MATLAB data type
%		  to a 2D character array
%		- the input may be a cell array formatted as a table with
%		  row/column labels and row/column separators
%		- any input can be formatted as a table using
%		  any combination of
%		  row/column labels and row/column separators
%
%		  use ML's web browser with html proportional text
%		  set to a fixed font to see the HTML file with
%		  proper formatting
%% REPLACE_WITH_DASH_DASH- syntax

%		[T,TC,AC,P] = CPRINTF(A,OPT1,...,OPTn)
%				converts A
%		 P          = CPRINTF
%				returns  the engine parameters
%		              CPRINTF
%				displays the help
%% REPLACE_WITH_DASH_DASH- input

% A	:	an ND array of
%  		- real and/or complex full   numeric data
%  		- real and/or complex sparse numeric data
%  		- logical data
%  		- char strings
%		- structures
%  		- other objects
%  		an ND cell array of any combination of the above
%% REPLACE_WITH_DASH_DASH- output

% T	:	character array with same number of rows and
%		delimiter separated columns as A
% TC	:	cell array of T
% AC	:	cell array of A (useful if A is displayed as a table)
% P	:	structure with engine parameters
%
% NOTE	:	unless an output argument is present, CPRINTF
%		DOES print the result even if an [;] is added
%		at the end to suppress printing
%% REPLACE_WITH_DASH_DASH- summary of options

% OPTION	argument	description		default
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%		SC		a single CHAR
%		CS		a CHAR string
%		FS		a format spec
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
% CELL				data type
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%    -c	:	FS		character string	'%s'
%    -n	:	FS		numeric real		'%g'
%   -cr	:	FS		numeric complex real	'%g'
%   -ci	:	FS		numeric complex imag	'%+gi'
%   -cd	:	FS		numeric complex delim	' '
%    -s	:	FS		numeric sparse indices	'(%g %g)'
%    -f	:	FS		false			'F'
%    -t	:	FS		true			'T'
%    -E	:	FS		empty CELL		'E(class)'
%    -I	:	FS		Inf			'INF'
%    -N	:	FS		NaN			'NAN'
%   -hs	:	T|F		convert to single hex	[F]
%   -hd	:	T|F		convert to double hex	[F]
%  -nex	:	T|F		no char CELL expansion	[F]
%    -O	:	FS		other objects		[built-in]
%   -Or	:	T|F		other objects raw mode	[built-in]
%    -C	:	FS		text surrounding CELLs	'%s'
%   -la	:	T|F		cell content alignment	[F]
%  -cla	:	T|F		complex alignment	[F]
%				F = right align
%				T = left  align
%
% ROW				content
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%    -L	:	CS		leading   row text	''
%    -T	:	CS		trailing  row text	''
%    -d	:	SC		separator between CELLs	' '
%   -dt	:	SC		separator table columns	' '
%   -nd	:	T|F		show ND page indices	[F]
%
% TABLE				content / processing
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%   -Ct	:	FS		text surrounding body	'%s'
%				but not label CELLs
%   -nc	:	FS		numeric real col	'%g'
%   -nr	:	FS		numeric real row
%   -Lh	:	{tn}		table  name		{' '}
%   -Lc	:	{c1...cn}	column labels
%   -Lr	:	{r1...rn}	row    labels
%  -Lcs	:	SC		column separator	''
%  -Lrs	:	SC		row    separator	''
%   -it	:	T|F		input is a       table	[F]
%   -mt	:	T|F		convert input to table	[F]
%   -ic	:	T|F		column width		[F]
%				F = max of all  cols
%				T = max of each col
%
% OUTPUT FILES
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%   -fa	:	name		append to output file	[]
%   -fc	:	name		create    output file	[]
%   -fi	:	name		input  file		[]
%   -fm	:	marker		insert result at marker	[]
%				in file [-fin]
%   -fr	:	{t1,r1,...}	replace token tx with	[]
%				value rx
%
% PROCESSING
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%    -p	:	T|F		do NOT use preferences	[F]
%  -opt	:	struct		use struct.option	[]
%  -ini	:	name		read options from file	[]
%  -sav	:	name		save options to   file	[]
%  -tab	:	n		use n SPACES/TAB	[8]
% -ntab	:	T|F		keep TABs in CELLs	[F]
%    -q	:	n		do not display result	[F]
%   -so	:	T|F		collect all output in	[F]
%				a structure
%   -db	:	T|F		show processing stages	[F]
%% arrays and tables
%% REPLACE_WITH_DASH_DASH- definitions

% each element of an array of any data type including a cell array
%    is considered a CELL
% CELLs can be formatted in various ways according to the data type
% a separator is printed between two CELLs
%
% CPRINTF optionally prints the input as a table consisting of
%    default or user definable
%    - table name
%    - row and/or column labels
%    - row and/or column separators
%    in any combination
% any input of min size 3x3 may be	printed   as a table	[-it]
% any input of any size may be		converted to a table	[-mt]
%
% CPRINTF optionally prints LEADING and/or TRAILING text
%    before and after each row of an array or a table
%% REPLACE_WITH_DASH_DASH- formatting

% sequence of formatting
%
% 1: CELL			each CELL's content is displayed according to
%				   the various CELL formatting options
%				by default, CELLs of Mx1 or ND character strings
%				   are expanded unless the [-nex] option is used
%				by default, all column widths of the array are
%				   the maximun width of all columns after conversion
%				   unless the [-ic] option is used, in which case
%				   each column's max width is used
%				a CELL's text may be left aligned [-la] with
%				   respect to the column width
% 2: CELL surroundings		each CELL's output may be embedded in additional
%				   text options [-C]/[-Ct]
% 3: CELL separators		a separator is inserted between two CELLs according
%				   to the [-d] option
% 4: ROW/COL labels		each label's numeric content is displayed according
%				   to table [-nc]/[-nr] options
% 5: ROW/COL separators		separators are displayed according to
%				   various options and depend 
%				   on the content of the separator as well as
%				   the content of the individual column separator
%				   of a predefined table [-it]
% 6: table name			is added at position (1,1) and formatted according
%				   to the common [-n] option
% 7: L/T text			row text delimiters are added
%				   before (L) and/or after (T) the array or table
%
% options to create a format string
%
% 1:				an ANSI C format string, eg,
%				      'a number %g'
% 2:				an anonymous function returning a string, eg,
%				      @(x) sprintf('a number %10d',x)
% 3:				a handle to a user defined function
%				   returning a string, eg,
%				      @mynumber
%				   where mynumber.m is a function file
% 4:				a handle to a ML stock function
%				   returning a string, eg,
%				      @dec2bin
%% REPLACE_WITH_DASH_DASH- arrays

% NOTE:	all data is collected in structure S to not clutter the workspace
%%

% simple real numeric matrix

	clear s;
	s.r=reshape(1:4*6,[4,6]);

	disp(s.r);
%%

% CPRINTF default output
% - all CELL widths have the same max CELL width
% - a CELL separator [-d] is inserted between CELLs 2:end-1 including
%      row labels and separators if the output is a table

% NOTE:	the [-tab] option (see section -engine options-) has NO effect
%	on the column separator [-d] if it contains TABs

	cprintf(s.r);
%% REPLACE_WITH_DASH_DASH- creating tables using row/column options

% label and separator options
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -Lh		name of the table at position (1,1)	{name}
%		- numeric data is converted
%		  according to the [-n] option
%		- names are always left aligned
% -Lc		col labels				{cl1,...,cln}
% -Lr		row labels				{rl1,...,rln}
%		- label(s) will be repeated or cut
%		  automatically to fit the table size
% -nc		format of numeric col labels		FS		['%g']
% -nr		format of numeric row labels		FS		['%g']
% -Lcs		col  separator				'csep'
% -Lrs		row  separator				'rsep'
% -d		CELL separator				'csep'
%		- also apply to labels and
%		  row/col separators
%		- a '\t' is printed as TAB
% -dt		CELL separator				'csep'
%		- only apply to col labels
%		  and separators in a table
%		- a '\t' is printed as TAB

% tables are constructed according to these input options

	s.clab={'apple','orange','banana','kiwi','peach','pear','NOTUSED'};
	s.rlab={'sweet','sour','salty','bitter'};

	cprintf(s.r,...
		'-Lc',	s.clab);
%%
	cprintf(s.r,...
		'-Lr',	s.rlab);
%%
	cprintf(s.r,...
		'-Lr',	s.rlab,...
		'-Lc',	s.clab,...
		'-Lcs',	'=');
%%
	cprintf(s.r,...
		'-Lr',	s.rlab,...
		'-Lc',	s.clab,...
		'-Lrs',	'|',...
		'-Lcs',	'=',...
		'-Lh',	{'A table'});
%%

% alignment of CELL content
% by default, each CELL's content is right aligned within the cols max width
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -la:		left align				T|F	[F]

	cprintf(s.r,...
		'-Lr',	s.rlab,...
		'-Lc',	s.clab,...
		'-Lrs',	'|',...
		'-Lcs',	'=',...
		'-la',	1);
%%

% widths of CELL content
% by default, the width of all CELLs is the max of all CELLs' width
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -ic		adjust each column width according	T|F	[F]
%		to its max CELL width

	cprintf(s.r,...
		'-Lr',	s.rlab,...
		'-Lc',	s.clab,...
		'-Lrs',	'|',...
		'-Lcs',	'=',...
		'-ic',	1);
%%

% CELL separators
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -d		CELL separator				'csep'
% -dt		CELL separator of table body CELLs only	'csep'

	cprintf(s.r,...
		'-Lr',	s.rlab,...
		'-Lc',	s.clab,...
		'-Lrs',	'|',...
		'-Lcs',	'=',...
		'-d',	'<.>');				% global CELL separator
%%

% using different separators in a table

	cprintf(s.r,...
		'-Lr',	s.rlab,...
		'-Lc',	s.clab,...
		'-Lrs',	'#',...
		'-Lcs',	'=',...
		'-dt',	'|',...				% table body CELLs' separator
		'-d',	'.');				% global CELL separator
%%

% if the separators contain TAB(s), CELL separators will not be continuous
%    for reasons of consistency

	cprintf(s.r,...
		'-Lr',	s.rlab,...
		'-Lc',	s.clab,...
		'-Lrs',	'|',...
		'-Lcs',	'=',...
		'-dt',	'|',...				% table body CELLs' separator
		'-d',	'\t');				% global CELL separator
%%

% formatting of numeric row/column labels (see also [-n] below)

	s.cclab=s.clab;
	s.rrlab=s.rlab;
	s.cclab([1,2])={1,20};
	s.rrlab([1,4])={pi,-4*pi};
	s.cfmt='col:%d';				% a char spec
	s.rfmt=@(x) sprintf('row:%d/%8.4f',sign(x),x);	% a function handle

	cprintf(s.r,...
		'-Lr',	s.rrlab,...
		'-Lc',	s.cclab,...
		'-Lrs',	'|',...
		'-Lcs',	'=',...
		'-nc',	s.cfmt,...
		'-nr',	s.rfmt);
%% REPLACE_WITH_DASH_DASH- creating tables using the default format

% an array can be displayed as a table using default options
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -mt		create a table				T|F	[F]

	cprintf(s.r,...
		'-mt',	1);
%%

% any row [-Lr]/[-Lrs] and/or column option [-Lc]/[-Lcs] overrides
%    the default option

	cprintf(s.r,...
		'-mt',	1,...
		'-Lcs',	'=',...
		'-Lr',	s.rlab,...
		'-Lh',	{'TBL.1'});
%% REPLACE_WITH_DASH_DASH- printing arrays that contain a predefined table

% an input cell array, which is already in the format of a complete table,
%    can be displayed using the auto-formatting option
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -it		assumes the input is a complete table	T|F	[F]
%		consisting of
%		- col labels and separators
%		- row labels and separators

	s.tbl={
%	row	row
%	labels	separators
	'tbl',	'|',		'C1','C2','C3','C4','C5','C6'	% col labels
	'=',	'=',		'=','-','=','sep','=','-'	% col separators
	'R1',	'sep',		1,2,3,4,5,6
	'R2',	'#',		1,2,3,4,5,6
	};

% raw output of the cell

	disp(s.tbl);
	cprintf(s.tbl);
%%

% output as a table

% NOTE:	single char col separators are repeated to the width of each col
%	multi  char col separators are printed according to the [-la] option
%	the [-ic] CELL width option may be applied

	cprintf(s.tbl,...
		'-it',	1);
%%

% any row [-Lr]/[-Lrs] and/or column option [-Lc]/[-Lcs] overrides
%    the default option

	cprintf(s.tbl,...
		'-it',	1,...
		'-Lr',	{'a','b'},...
		'-Lcs',	'*');
%% REPLACE_WITH_DASH_DASH- leading and trailing text

% text can be added before or after an array or table
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -L		leading  text				character string
% -T		trailing text				character string

	cprintf(s.r,...
		'-L',	'row\t');
%%
	cprintf(s.tbl,...
		'-it',	1,...
		'-L',	'my rows\t',...
		'-T',	'\teor');
%% CELL conversion options

% NOTE: the [-mt] option is used throughout for ease of visibility
%% REPLACE_WITH_DASH_DASH- 2D character arrays and ND cell arrays of ND character strings

% by default, Mx1 or ND character strings are expanded to 2D arrays
%    before conversion
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -nex		do NOT expand				T|F	[F]
%		use [-O] option display style

% a simple array of character strings

	s.sc=[
		'this is a'
		'  test   '
	];

% white spaces are kept and the [-la] option has NO effect

	cprintf(s.sc,...
		'-mt',	1,...
		'-la',	1);				% left align
%%

% a cell array of 1xN character strings

	s.cs={
		'this is'	'yet another'
		'test'		'    example'		% (2,2) has SPACEs!
	};

	cprintf(s.cs,...
		'-mt',	1);
%%

% NOTE:	the [-la] option has an effect EXCEPT for embedded SPACEs

	cprintf(s.cs,...
		'-mt',	1,...
		'-la',	1);				% left align
%%

% a cell array of mixed MxN character strings

	s.ndcs={'foo','GOO'.';'HOO'.','ioo'};

	disp(s.ndcs);
%%

% NOTE:	placeholders for 1xN character arrays

	cprintf(s.ndcs,...
		'-mt',	1,...
		'-la',	1,...				% left align
		'-d',	'\t');				% delimiter: TAB
%%
	s.ndsc={
		s.sc,		[s.sc;s.sc;s.sc],	s.sc
		s.sc,		'FOO',			[s.sc;s.sc]
		'XXX'.',	s.sc			[s.sc;s.sc]
	};

	disp(s.ndsc);
%%
	cprintf(s.ndsc,...
		'-mt',	1,...
		'-la',	1,...				% left align
		'-d',	'   ');				% delimiter: 3 SPACEs
%%

% a ND cell array of MxN character strings

	s.ndnd(:,:,1)=s.ndsc;
	s.ndnd(:,:,2)=s.ndsc;
	
	disp(s.ndnd);
%%
	cprintf(s.ndnd,...
		'-mt',	1,...
		'-dt',	'|');
%%

% do not expand non-1xN character strings

	cprintf(s.ndnd,...
		'-mt',	1,...
		'-nex',	1);
%% REPLACE_WITH_DASH_DASH- full mixed real and/or complex numeric arrays

% formatting options for numeric data (see section -formatting-)
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -n		real numbers				FS	['%g']
% -cr		real      part of complex numbers	FS	['%g']
% -ci		imaginary part of complex numbers	FS	['%+gi]
% -cd		delimiter between real/imaginary part	FS	[' ']
% -cla		left align imaginary parts		T|F	[F]

	s.m=[
		1,		2,		3+3i
		nan-4.2i,	nan,		inf
		-inf,		inf+3i*inf,	inf+5.5i
	];

	disp(num2cell(s.m));
%%

% unlike DISP, CPRINTF prints real numbers
%    at the position of the real part of the complex number
%    for reasons of consistency
% column widths of real and imaginary parts are adjusted to the respective max
%    width of each component (see c:2)

	cprintf(s.m,...
		'-mt',	1);
%%

% left align imaginary parts of complex numbers [-cla]

	cprintf(s.m,...
		'-mt',	1,...
		'-cla',	1);
%%

% using various numeric options

% NOTE:	only real numbers use the [-n] option
%	the [-cd] separator is applied to ALL numbers

	cprintf(s.m,...
		'-mt',	1,...
		'-n',	@(x) sprintf('%g=%s',x,num2hex(single(x))),...
		'-cr',	'R %g',...
		'-ci',	'I %+gi',...
		'-cd',	' / ');
%% REPLACE_WITH_DASH_DASH- sparse mixed real and/or complex numeric arrays

% sparse arrays are displayed in accordance with ML's DISP functionality
% col 1		indices
% col 2		values
%
% formatting options for numeric data (see section -formatting-)
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -s		sparse indices must take TWO args	FS	[('%g %g)']

	s.s=sparse(4,4);

% output of empty sparse arrays show max indices with a value of zero

	cprintf(s.s,...
		'-mt',	1);
%%
	s.s(1,1)=nan;
	s.s(1,2)=inf;
	s.s(1,3)=-inf;
	s.s(1,4)=pi;
	s.s(2,1)=4+3i;
	s.s(2,2)=5+4i*inf;
	s.s(2,3)=6+5i*nan;

	disp(s.s);
%%
	cprintf(s.s,...
		'-mt',	1);
%%

% using various options

	cprintf(s.s,...
		'-mt',	1,...
		'-ic',	1,...				% use individual col width
		'-n',	'    value: %6.2f',...		% real numbers
		'-cr',	'    value: %6.2f',...		% real part of complex numbers
		'-s',	@(x,y) sprintf('R=%d C=%d',x,y));
%% REPLACE_WITH_DASH_DASH- logical arrays

% formatting options for logical data (see section -formatting-)
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -t		TRUE  values				FS	['T']
% -f		FALSE values				FS	['F']

	cprintf(real(s.m)>4,...
		'-mt',	1);
%%
	cprintf(imag(s.m)<1,...
		'-mt',	1,...
		'-f',	'NO',...
		'-t',	'yes');

%% REPLACE_WITH_DASH_DASH- NaN/Inf

% formatting options for NaN/Inf (see section -formatting-)
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -N:		NaN      values				FS	[ML def]
% -I:		-Inf/Inf values				FS	[ML def]
%
% NOTE:	[-N] and/or [-I] options override ALL other options for numeric
%	data types for reasons of consistency

	cprintf(s.m,...
		'-mt',	1,...
		'-d',	'\t');				% use TAB as CELL separator
%%

% using various options

	cprintf(s.m,...
		'-mt',	1,...
		'-d',	'\t',...			% use TAB as CELL separator
		'-n',	'%5.2f',...			% real numbers
		'-N',	'#fff#',...			% NaNs, eg, for a spreadsheet
		'-I',	@(x) sprintf('%dI',sign(x)),...	% Infs
		'-ci',	'%5.2fi');			% imaginary part of complex numbers
%% REPLACE_WITH_DASH_DASH- hexadecimal representation of numeric input

% conversion to singles/doubles IEEE hexadecimal strings
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -hs		all numeric CELLs are converted to
%		   single hex				T|F	[F]
% -hd		   double hex				T|F	[F]

	cprintf(s.m,...
		'-mt',	1,...
		'-hs',	1);
%% cell arrays

% ALL CELLs of a cell array are formatted according to the above formatting rules
% if a CELL contains complex data, ALL numbers will be displayed using
%    the complex spacing mode (see above)
% if a CELL contains sparse data, it is converted to full
%    prior to conversion
% a cell array of any (mixed) content can be displayed as a table

	s.ss=sparse(1,1,-pi);
	s.cc={
		'this',		'is',	false,	2-3i,	nan
		'a cell',	pi,	1000,	s.ss,	true
	};

	cprintf(s.cc,...
		'-mt',	1);
%% REPLACE_WITH_DASH_DASH- empty CELLs and other data types

% formatting options for empty CELLs and other data types
%    (see section -formatting-)
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -E		empty CELLs				FS	['E(class)']
%		EXCEPT empty character strings
% -O		other data types			FS	[built-in]
%		including ND arrays of any type
%		default output according to the input
%		logical:	L(dim:size:class)
%		numeric:	N(dim:size:class.g.s.c)
%		      g:	is global
%		      s:	is sparse
%		      c:	is complex
%		cell   :	C(dim:size:class)
%		struct :	S(dim:size:class)
%		func   :	F(@function)
%		other  :	O(dim:size:class)
% -Or		only show content within brackets, eg,	T|F	[F]
%		to save function handle definitions
%		in an ASCII file

% NOTE:	the [-O] option will be applied to ALL other data types
%	the engine structure returns a function handle, which
%	may be used to check conversion (see section -macros-)
%
%		p=cprintf;	% returns the engine structure
%		r=p.other(magic(3)+4i)
%		r = N(2:3x3:double.c)
%
%	users can write their own functions, which must return
%	a 1xN character string
%
%		cprintf(...,'-O',@myother)

% NOTE:	difference of default output of various empty/other data

	cprintf([],...
		'-Lr',	{'empty array             []'},...
		'-mt',	1);

	cprintf({[]},...
		'-Lr',	{'cell with empty array {[]}'},...
		'-mt',	1);

	cprintf({},...
		'-Lr',	{'empty cell              {}'},...
		'-mt',	1);

	cprintf({{}},...
		'-Lr',	{'cell with empty cell  {{}}'},...
		'-mt',	1);
%%
	s.cc(1,1)={@(x) x};
	s.cc(1,3)={[]};
	s.cc(2,3)={sparse(3,3,-pi)};
	s.cc(2,1)={repmat(struct('a','b'),[2,3,3])};
	s.cc(3,1)={cell([3,3,3])};
	s.cc(3,2)={s.cc};
	s.cc(3,3)={repmat(struct('a',{'a'}),[2,2,3])};

	disp(s.cc);
%%
	cprintf(s.cc,...
		'-mt',	1);
%%

% using [-E]/[-O] options

	s.O=@(x) sprintf('o:%d/%s',ndims(x),class(x));

	cprintf(s.cc,...
		'-mt',	1,...
		'-E',	'empty',...			% EMPYT CELLs
		'-O',	s.O);				% OTHER CELL content
%% REPLACE_WITH_DASH_DASH- surrounding text of CELLs

% CELLs may be displayed with an additional surrounding text
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -C		surrounding of EACH CELL		FS	['%s']
%		including labels and separators
% -Ct		surrounding of table body CELLs only	FS	['%s']

% NOTE:	FS must only contain %s format specs

% embedding all CELLs

	cprintf(s.m,...
		'-mt',	1,...
		'-C',	'<%s>');
%%

% only embedding table body CELLs

	cprintf(s.m,...
		'-mt',	1,...
		'-Ct',	'{%s\t}');
%% ND arrays

% ND arrays are displayed according to ML's display rules
%    all arrays are converted to their 2D equivalent
%

	s.nda=reshape(1:2*4*2*2*2,[2,4,2,2,2]);

	disp(s.nda);
%%
	cprintf(s.nda,...
		'-mt',	1);
%% ND cell arrays of mixed content

% ND cell arrays are converted according to their CELL content
%    the cell array is converted to its 2D equivalent

	s.cmc=reshape(num2cell(1:2*2*2*2),[2,2,2,2]);
	s.cmc(1,1,1,1)={magic(3)};
	s.cmc(2,2,1,1)={s.ndcs};
	s.cmc(1:2,1:2,2,1)=s.ndcs;
	s.cmc(1,1,1,2)={'foo'};
	s.cmc(1:2,2,1,2)={false,true};
	s.cmc(1,1:2,2,2)={nan,-inf};
	s.cmc(2,1:2,2,2)={-100-2i,100+2i};

	disp(s.cmc);
%%

% NOTE:	display of vertical character strings
%	with proper spacing of other content
%	all numbers are displayed in complex style

	cprintf(s.cmc,...
		'-mt',	1,...
		'-f',	'NO',...
		'-t',	'YES',...
		'-N',	'a nan',...
		'-Ct',	'<%s>',...
		'-dt',	' | ',...
		'-d',	'\t');
%% REPLACE_WITH_DASH_DASH- page indexing

% a page index may be displayed, which adheres to the common ML display rules
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -nd		show page indices			T|F	[F]

% NOTE:	if the [-Lr] option is used, only data rows
%	must be labelled
%	page index rows are labelled 'page' by default

	cprintf(s.nda,...
		'-mt',	1,...
		'-nd',	1);
%%
	cprintf(s.cmc,...
		'-mt',	1,...
		'-nd',	1);
%% ND structures

% a (ND) structure is displayed in the form
%
%	fieldname separator fieldcontent
%
% any content of a field is formatted according to the CELL formatting rules
% if the table option [-mt] is used, both fieldname(s) and fieldcontent have
%    their own column(s)
% the layout of ND structures follows the general ML rules for ND data types
%    and the [-nd] option may be used

% an ND structure with unique fieldcontent reflecting the indices

	s.siz=[2,2,3,2];
	s.fh=cprintf;
	s.ns=num2cell(s.fh.comb(s.siz));
	s.st=struct('a','','bb','','ccc','');
	s.st=repmat(s.st,s.siz);
for	ii=1:size(s.ns,1)
	s.txt=sprintf('%d.',s.ns{ii,:});
	s.txt(end)='';
	s.st(s.ns{ii,:}).a=sprintf('%s-A',s.txt);
	s.st(s.ns{ii,:}).bb=sprintf('%s-B',s.txt);
	s.st(s.ns{ii,:}).ccc='XYZ'.';			% a 3x1 character string
end
	clear ii;

	disp(s.st);
	disp('structure with indices (1,1,3,2)');
	disp(s.st(1,1,3,2));
%%

% NOTE:	display of Mx1 character string

	cprintf(s.st(1,1,3,2),...
		'-mt',	1,...
		'-Lc',	{'fieldname','value'},...
		'-dt',	' :  ');
%%

% NOTE:	page indices 1 and 2 display the number of structures and
%	NOT the number of fieldnames and columns

	cprintf(s.st,...
		'-mt',	1,...
		'-nd',	1,...				% show page indices
		'-nex',	1,...				% do not expand char strings
		'-dt',	'|');				% table cell separator
%%

% show content of a LINE graphics handle

	s.fh=figure('visible','off');
	cprintf(struct(handle(line)),...
		'-mt',	1,...
		'-dt',	' :  ');
	delete(s.fh);					% clean up
%% REPLACE_WITH_DASH_DASH- anomalous structures

% anomalous structures of the form

	s.san=struct('a',{},'b',1);

% are valid MATLAB constructs

	s.san
	clear ans;					% clean up

% but yield an error if used like
%{
	val=s.san.a
??? Too many outputs requested.  Most likely cause is missing [] around
left hand side that has a comma separated list expansion.
%}

% they are displayed with a fieldcontent of [?]

	cprintf(s.san,...
		'-mt',	1,...
		'-Lc',	{'fieldname','value'},...
		'-dt',	' :  ');
%% ND arrays and ND cell arrays of other objects

% other objects are displayed according to the [-O] options

if	ispc
	s.fh=figure('visible','off');
	s.com=actxcontrol('mscal.Calendar',[20 20 300 300],s.fh);
	s.fun=@(x) x+10;

	s.O=@(x) sprintf('%s(%s )',class(x),sprintf(' %d',size(x)));

	cprintf([s.com;s.com],...
		'-mt',	1,...
		'-O',	s.O);				% show class:size
%%
%
	s.com={s.com,s.fun;s.fun,s.com};

	cprintf(s.com,...				% using the built-in other engine
		'-mt',	1);
%%
%
	cprintf(s.com,...
		'-mt',	1,...
		'-O',	s.O);				% show class:size

	delete(s.fh);
end
%% output files

% results can be written or appended to ASCII files
% file templates can be used to insert results and replace token templates
%    with user defined values
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -fa		append to output file			aname	[]
% -fc		create output file			cname	[]
%		precedence: [-fa] > [-fc]
%
% -fi		template file				tname	[]
%		may contain markers as single line
%		entries where the result is
%		inserted
%		for each run, only the FIRST marker
%		is being used
%		if no marker is found and the
%		[-fa] option is used, the result is
%		appended to the content of the template
%		file before creating the output file
% -fm		marker for the [-fi] option		marker	[]
%		must be a 1xN character string
% -fr		cell of token/value pairs		{t,v...}
%		must be 1xN character strings
%		all tokens are replaced with their
%		values in a [-fi] template file
%		before insertion of the result

% NOTE:	output files contain the exact result including
%	TAB characters
%	markers and tokens are replaced using the
%	regular expression engine
%	therefor, if special characters are used,
%	they must be marked as literal by \char
%
% the accompanying file CPTMPL.TXT is used for demonstration
% a file CP_00X.00X is created during the demonstration and
% removed afterwards

	s.ftmpl='cptmpl.txt';
	s.fout='cp_00X.00X';

	type(s.ftmpl);
%% REPLACE_WITH_DASH_DASH- creating output files

% using a return argument prevents the result from being displayed after
%    runtime
% a print message is always printed to confirm the writing process

	s.p=cprintf(s.m,...
		'-mt',	1,...
		'-fc',	s.fout);
	type(s.fout);
%% REPLACE_WITH_DASH_DASH- appending to files

	s.p=cprintf(s.r,...
		'-mt',	1,...
		'-fa',	s.fout,...
		'-dt',	'|');
	type(s.fout);
	delete(s.fout);
%% REPLACE_WITH_DASH_DASH- using a template file

	type(s.ftmpl);
	s.p=cprintf(s.m,...
		'-mt',	1,...
		'-fc',	s.fout,...
		'-fi',	s.ftmpl,...
		'-fm',	'\$MARK\$');			% note liteal \$

% NOTE:	only marker #1 is replaced

	type(s.fout);
%%

% to replace other markers, the newly created FOUT must be used

	s.p=cprintf(s.r,...
		'-mt',	1,...
		'-dt',	'|',...
		'-fc',	s.fout,...
		'-fi',	s.fout,...
		'-fm',	'\$MARK\$');
	type(s.fout);
	delete(s.fout);
%% REPLACE_WITH_DASH_DASH- replacing tokens in template files

	s.tok={
		'FO',		'file'
		'<DATE>',	datestr(clock)
		'output \$',	'result #'
	};
	s.p=cprintf(s.r,...
		'-mt',	1,...
		'-dt',	'|',...
		'-fc',	s.fout,...
		'-fi',	s.ftmpl,...
		'-fr',	s.tok,...
		'-fm',	'\$MARK\$');
	s.p=cprintf(s.m,...
		'-mt',	1,...
		'-dt',	'|',...
		'-fa',	s.fout,...
		'-fi',	s.fout,...
		'-fr',	s.tok,...
		'-fm',	'\$MARK\$');

% NOTE:	no marker exists in S.FOUT during the second call
%	the result is appended       with the [-fa] option
%	whereas an error would occur with the [-fc] option

	type(s.fout);
	delete(s.fout);
%% option processing
%% REPLACE_WITH_DASH_DASH- option precedence

% options are resolved in this order of precedence from lowest to highest
%
%	1) getpref					low
%	2) option file
%	3) option structure
%	4) command line					high
%
% NOTE:	if multiple options are set, the LAST values is used
%% REPLACE_WITH_DASH_DASH- option preferences across MATLAB sessions

% user may define preferred options, which are kept across MATLAB sessions, by
%
%	setpref('cprintf','opt',{'OPT1',VAL1,...,'OPTn',VALn});

% setting [-mt] options by default

	s.opref=getpref('cprintf');			% save old state
	setpref('cprintf','opt',{'-mt',1});

	cprintf(s.r);
%%

% modification of preferred options
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -p		do NOT use preferred options		[F]

% NOTE:	[-p] requires NO value

	cprintf(s.r,...
		'-p',...				% do NOT use preferred options
		'-d',	' | ');
%%

% in addition, any runtime option will override a preferred option

	cprintf(s.r,...
		'-mt',	0,...				% override preferred [-mt]
		'-d',	' | ');

if	~isempty(s.opref)
	setpref('cprintf','opt',s.opref.opt);		% reset
else
	rmpref('cprintf');				% clean up
end
%% REPLACE_WITH_DASH_DASH- reading and writing option files

% options can be retrieved from any user created ASCII file
% there are two possible file formats:
% 1)		user created files, which contain a sequence of option/value pairs
%		as if typed on the command line
%		if it is an m-file, the extension is not necessary, otherwise, it
%		must be added to identify the file
% 2)		files generated by CPRINTF, which contain a sequence of commands
%		that create an option structure
%		these files are m-files with a short help header,
%		which may be used as stand-alones as well to
%		retrieve the option structure
%
% read and create option files
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -ini		read options from file			iname	[]
%		format: user created or CPRINTF
% -sav		save options to   file			sname	[]
%		which are created from a [-ini] file
%		if this option is not used, a temporary
%		ASCII file is created in the current
%		folder and discarded immediately after
%		loading
%
%		see also -macros- below for possibilities
%		to read/create option files without running
%		CPRINTF
%
% NOTE:	if the [-ini] option is used without
%	the [-sav] option, a temporary files is
%	created and removed right after options
%	are read if the [-ini] and [-sav] use
%	the same file name, a new copy of the
%	file is saved without warning
%	only command line options are saved
%%

% user created ASCII files
% - option/values must be written as if typed at the command line, eg,
%		'-mt',1,'-Lc',{1,2,'a'}
% - the parsing/decoding of these files starts at the first occurrence of
%   an option
% - option names must be convertible to valid structure fieldnames
% - values may contain any regular, valid ML expression and must be
%   separated by at least one <,> from the option
% - comments may be used according the ML's common rules
% - white spaces, <;>, and multiple <,>s are discarded
% - newlines are discarded

% CPINI.TXT is an exemplary [-ini] file showing some syntax possibilities,
% which typically are less disorganized and chaotic
% - parsing starts at '-begin'
% - note several ML type comments starting with a <%>
% - non-CPRINTF options may be used; they are created but discarded at runtime
% - any valid ML command in between option/value pairs will be created during
%   runtime and results may be displayed in the command window if it is not
%   suppressed by a <;>

	s.fini='cpini.txt';
	s.fout=sprintf('cpini_%s',num2hex(rand(1,2)));	% a unique file name
							% extension not required

	type(s.fini);
%%

% load CPINI.TXT during runtime and save it as a CPRINTF option file

% NOTE:	correct formatting of table elements according to options

	cprintf(bitand(s.r,1)~=0,...
		'-mt',	1,...
		'-ini',	s.fini,...
		'-sav',	s.fout);
%%

% output and standalone use of CPRINTF created m-file

% NOTE:	correct formatting of multiline commands
%	positioning of comments
%	the option structure contains all option/value pairs

	disp('***** FILE CONTENT');
	type(s.fout);
%%
	disp('***** HELP SECTION');
	help(s.fout);
%%
	disp('***** OPTION STRUCTURE');
	s.val=feval(s.fout);				% typically: s.val=foo;
	disp(s.val);
%% REPLACE_WITH_DASH_DASH- option structures

% a predefined option structure may be used to easily enter options
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -opt		an option structure			os	[]

% NOTE:	an option structure consists of
%
%		s.option = value
%
%	where option is a valid CPRINTF option
%	without the [-] and a valid value
%	unused options are discarded
%	CPRINTF created [-ini] files produce option structures

	s.sopt.a='a';					% currently not an option
	s.sopt.Lc={1,'XYZ',2};
	s.sopt.Lcs='=';
	s.sopt.Lr=s.rlab;
	
	cprintf(s.r,...
		'-mt',	1,...
		'-opt',	s.sopt);
%%

% using a CPRINTF created ini file, which returns an option structure

	cprintf(s.r>12,...
		'-mt',	1,...
		'-opt',	feval(s.fout));			% typically: '-opt','foo'

	delete([s.fout,'.m']);				% to clean up we need the extension
%% engine options
%% REPLACE_WITH_DASH_DASH- TAB size and TAB replacement in CELLs

% conversion of TAB [\t] characters to SPACES for format specs
%    OTHER than the CELL separator [-d]
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -tab		number of SPACES/TAB			n	[8]
% -ntab		do NOT replace TABs in CELLs		T|F	[F]

% compare with output above

	cprintf(s.m,...
		'-mt',	1,...
		'-Ct',	'{%s\t}',...
		'-tab',	2);
%%
%

% NOTE:	replacement of CELL TABS with TAB size SPACES in the output

	s.stab={sprintf('a\t\t\ttab'),sprintf('b\t\ttab'),'c d';100,200,300};
	cprintf(s.stab,...
		'-mt',	1);
%%
%

% NOTE:	with the [-ntab] option, table colums have an additional length
%	of one char <\t> per TAB and the TABs are kept in the output
%	this may be required in other applications

	s.res=cprintf(s.stab,...
		'-mt',	1,...
		'-ntab',1);

	s.rres=strrep(cellstr(s.res),sprintf('\t'),'.');
	disp(sprintf('\noriginal output\n'));
	disp(s.res);
	disp(sprintf('\noriginal output with later TAB replacements\n'));
	disp(char(s.rres));
%% REPLACE_WITH_DASH_DASH- runtime printout

% runtime processing and timing of conversion stages can be print out
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -db		show processing of conversions		T|F	[F]
% -q		quiet mode				T|F	[F]
%		except for [-db] output ALL
%		runtime processing for
%		[-fc]/[-fa]/[-ini] options
%		as well as the display of the result
%		is suppressed even if the command
%		does NOT end with a <;>

	cprintf(s.m,...
		'-mt',	1,...
		'-db',	1);

% explanation of runtime output
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% - numeric col 1:	 # of cells remaining
%			-# of cells converted
%			if the array contains complex numbers, the -# will
%			   be larger than the #
% - numeric col 2:	time [sec] used to convert

% NOTE:	after formatting, 0 c should be left to convert
%% output
%% REPLACE_WITH_DASH_DASH- macros

% several macros (function handles) are available if the engine structure
%    is retrieved, which may be helpful to prepare and/or organize often
%    used options
% if no output argument is selected, macros do NOT return the default
%    ANS
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% .getpar	to create an option structure from
%		command line parameters
% .setpar	to create a CPRINTF options only
%		option structure from a user defined
%		option structure
% .ini		to read/create ini files
% .write	to write an output file
% .other	to test the [-O] display engine, which
%		must produce an output for any data
%		type and array size
% .comb		to create a page index sequence

% macros can be retrieved by a simple call to CPRINTF without arguments,
%    returns a structure with the engine parameters; see also -arguments-

	s.mac=cprintf;
%%

% GETPAR	OS = P.getpar(OPT1,VAL1,...,OPTn,VALn)

% NOTE:	options currently not used by CPRINTF are discarded
%	values, which would not be active during runtime
%	are discarded as well, eg, [-nd]

	s.opt=s.mac.getpar('-foo','goo','-Lc',{'a',1,'b'},'-mt',0,'-nd',[]);
	disp(s.opt);
%%

% SETPAR	OS = P.setpar(OS)

% NOTE:	same as GETPAR
%	the input may be a CPRINTF created [-sav] file

%	s.opt=s.mac.setpar('CPRINTF_savfile');
	s.opt=s.mac.setpar(s.val);				% [-ini] created option structure
	disp(s.opt);
%%

% INI		OS = P.ini(INIFILE,[SAVFILE],['-q',1,...,OPTn,VALn]);

% NOTE:	see section -option files- for rules regarding the creation of output files
%	to add options, SAVFILE must be set
%	to create a temporary file, SAVFILE can be set to ''

	s.opt=s.mac.ini(s.fini);
	disp(s.opt);
%%

% WRITE		[ARG,...] = P.write(A,OPT1,VAL1,...,OPTn,VALn)

% NOTE:	mimicks the command
%
%		[arg,...] = cprintf(A,WOPT,WVAL,OPT1,VAL1,...,OPTn,VALn)
%
%	one of the WOPTs must be a [-fc]/[-fa] file creation command
%	the [-q] silent processing flag is turned on [T] by default
%	the [-mt] table option is turned off [F] by default and
%	must be set if this feature is required

	s.fwrite='CP_00X.00X';
	s.mac.write(s.r,'-fc',s.fwrite);
	type(s.fwrite);
	delete(s.fwrite);				% clean up
%%

% OTHER		OVAL = P.other(O1,...,On)

	s.oval={pi,magic(3)+1i,cell(2,2),sparse(2,2,3+1i),@(x) x+10};
	s.oval=s.mac.other(s.oval{:});
	disp(s.oval);
%%

% COMB		PIX = P.comb(ARRAYSIZE)

	s.pix=s.mac.comb(size(rand([2,2,1,2])));
	disp(s.pix);
%% REPLACE_WITH_DASH_DASH- arguments

% the engine structure is returned by a call to CPRINTF without input arguments
% this may be useful to access several CPRINTF functions
%
	s.p=cprintf;

%	s.p.other()	check other display output

% several outputs are available to import the result into other programs,
%    in particular, spreadsheets, which take cell input, eg,
%    XLSWRITE (see OUTPUT section)
% all output can be collected into a single structure
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% -so		collect output				T|F	[F]

% NOTE:	the result is NOT displayed during runtime because of
%	1) output arguments and 2) the semicolon at the end

	[s.rs,s.rc,s.mc,s.par]=cprintf(s.m,...
		'-mt',	1);

% the result

	disp(s.rs);
%%

% the output prior to conversion

	disp(s.mc);
%%

% the output in a cell array with formatted CELLs

	disp(s.rc);
%%

% all output collected in a structure

	s.p=cprintf(s.m,...
		'-mt',	1,...
		'-so',	1);

% show engine parameters, input, and output

	disp(s.p);
%%

% same as RC above

	disp(s.p.cell);
%% REPLACE_WITH_DASH_DASH- input to xlswrite

% use RC as input to xlswrite
%{
	s.rc=strtrim(s.rc);	% if leading/trailing spaces need to be removed
	s.fnam='foo.xls';
	xlswrite(s.fnam,s.rc);
	winopen(s.fnam);
%}
##### SOURCE END #####
-->
   </body>
</html>